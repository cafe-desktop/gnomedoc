<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/lgo2010.css"></link><link rel="icon" type="image/png" href="../skin/gnome-16.png"></link><link rel="SHORTCUT ICON" type="image/png" href="../skin/gnome-16.png"></link><link rel="search" type="application/opensearchdescription+xml" href="../gnome-library-search.xml" title="GNOME Library Search"></link><link rel="stylesheet" href="../skin/docbook.css" type="text/css"></link><title>Shared MIME-info Database</title><link rel="stylesheet" type="text/css" media="all" href="../skin/jquery.autocomplete.css"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/960_24_col.css"></link><script type="text/javascript" src="../js/jquery.js"></script><script type="text/javascript" src="https://developer-old.gnome.org/js/jquery.jcarousel.min.js"></script><script type="text/javascript" src="../js/jquery.autocomplete.js"></script></head><body><div id="accessibility_access"><ul><li><a href="index.html#container">Go to page content</a></li><li><a href="index.html#top_bar">Go to main menu</a></li><li><a href="index.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/search"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form></div></div></div><div class="clearfix"></div><div id="container" class="body two_columns"><div class="content"><div class="action_box"><p class="canonical-ref">
          Canonical document reference:
	  <a href="http://standards.freedesktop.org/shared-mime-info-spec/shared-mime-info-spec-latest.html">http://standards.freedesktop.org/shared-mime-info-spec/shared-mime-info-spec-latest.html</a></p></div><div class="article"><div class="titlepage"><div><div><h2 class="title"><a name="index"></a>Shared MIME-info Database</h2></div><div><div class="authorgroup"><h3 class="corpauthor">
			<a class="ulink" href="http://www.freedesktop.org" target="_top">
			X Desktop Group
			</a>
		</h3><div class="author"><h3 class="author"><span class="firstname">Thomas</span> <span class="surname">Leonard</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a class="email" href="mailto:tal197%20at%20users.sf.net">tal197 at users.sf.net</a>&gt;</code></p></div></div></div></div></div></div><hr></hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="index.html#idm46078817830864">Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#idm46078817830224">Version</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078814302240">What is this spec?</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078814314288">Language used in this specification</a></span></dt></dl></dd><dt><span class="sect1"><a href="index.html#idm46078814312512">Unified system</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#s2_layout">Directory layout</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078817906496">The source XML files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813212384">The MEDIA/SUBTYPE.xml files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813205360">The glob files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813192976">The magic files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813174224">The XMLnamespaces files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813170880">The icon files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813167232">The treemagic files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813157200">The mime.cache files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813145584">Storing the MIME type using Extended Attributes</a></span></dt><dt><span class="sect2"><a href="index.html#subclassing">Subclassing</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813138336">Recommended checking order</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813129696">Non-regular files</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813124432">Content types for volumes</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813120800">URI scheme handlers</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813118320">Security implications</a></span></dt><dt><span class="sect2"><a href="index.html#idm46078813116064">User modification</a></span></dt></dl></dd><dt><span class="sect1"><a href="index.html#idm46078813113872">Contributors</a></span></dt><dt><span class="bibliography"><a href="index.html#idm46078813105568">References</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46078817830864"></a>Introduction</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078817830224"></a>Version</h3></div></div></div><p>
This is version 0.21 of the Shared MIME-info Database specification, last updated 2 October 2018.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078814302240"></a>What is this spec?</h3></div></div></div><p>
Many programs and desktops use the MIME system[<span class="citation">MIME</span>]
to represent the types of files. Frequently, it is necessary to work out the
correct MIME type for a file. This is generally done by examining the file's
name or contents, and looking up the correct MIME type in a database.
		</p><p>
It is also useful to store information about each type, such as a textual
description of it, or a list of applications that can be used to view or edit
files of that type.
		</p><p>
For interoperability, it is useful for different programs to use the same
database so that different programs agree on the type of a file and
information is not duplicated. It is also helpful for application authors to
only have to install new information in one place.
		</p><p>
This specification attempts to unify the MIME database systems currently in
use by GNOME[<a class="citation" href="index.html#idm46078813104928"><span class="citation">GNOME</span></a>], KDE[<a class="citation" href="index.html#idm46078813103536"><span class="citation">KDE</span></a>] and
ROX[<a class="citation" href="index.html#idm46078813102144"><span class="citation">ROX</span></a>], and provide room for future extensibility.
		</p><p>
The MIME database does NOT store user preferences (such as a user's preferred
application for handling files of a particular type). It may be used to store
static information, such as that files of a certain type may be viewed with
a particular application.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078814314288"></a>Language used in this specification</h3></div></div></div><p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be
interpreted as described in RFC 2119[<a class="citation" href="index.html#idm46078813097552"><span class="citation">RFC-2119</span></a>].
		</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46078814312512"></a>Unified system</h2></div></div></div><p>
In discussions about the previous systems used by GNOME, KDE and ROX (see the
"History and related systems" document), it was clear that the differences
between the databases were simply a result of them being separate, and not due
to any fundamental disagreements between developers. Everyone is keen to see
them merged.
	</p><p>
This specification proposes:

		</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
A standard way for applications to install new MIME related information.
			</p></li><li class="listitem"><p>
A standard way of getting the MIME type for a file.
			</p></li><li class="listitem"><p>
A standard way of getting information about a MIME type.
			</p></li><li class="listitem"><p>
Standard locations for all the files, and methods of resolving conflicts.
			</p></li></ul></div><p>
Further, the existing databases have been merged into a single package
[<a class="citation" href="index.html#idm46078813099152"><span class="citation">SharedMIME</span></a>].
	</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="s2_layout"></a>Directory layout</h3></div></div></div><p>
There are two important requirements for the way the MIME database is stored:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Applications must be able to extend the database in any way when they are installed,
to add both new rules for determining type, and new information about specific types.
				</p></li><li class="listitem"><p>
It must be possible to install applications in /usr, /usr/local and the user's home directory
(in the normal Unix way) and have the MIME information used.
				</p></li></ul></div><p>
		</p><p>
This specification uses the XDG Base Directory Specification[<a class="citation" href="index.html#idm46078813095824"><span class="citation">BaseDir</span></a>] to
define the prefixes below which the database is stored.
In the rest of this document, paths shown with the prefix
<code class="filename">&lt;MIME&gt;</code> indicate the files should be loaded from
the <code class="filename">mime</code> subdirectory of every directory in
<code class="envar">XDG_DATA_HOME</code>:<code class="envar">XDG_DATA_DIRS</code>.
		</p><p>
For example, when using the default paths, <span class="quote">“<span class="quote">Load all the
<code class="filename">&lt;MIME&gt;/text/html.xml</code> files</span>”</span> means to
load <code class="filename">/usr/share/mime/text/html.xml</code>,
<code class="filename">/usr/local/share/mime/text/html.xml</code>, and
<code class="filename">~/.local/share/mime/text/html.xml</code> (if they exist, and in this order).
Information found in a directory is added to the information found in previous
directories, except when <strong class="userinput"><code>glob-deleteall</code></strong> or <strong class="userinput"><code>magic-deleteall</code></strong>
is used to overwrite parts of a mimetype definition.
		</p><p>
Each application that wishes to contribute to the MIME database will install a
single XML file, named after the application, into one of the three
<code class="filename">&lt;MIME&gt;/packages/</code> directories (depending on where the user requested
the application be installed). After installing, uninstalling or modifying this
file, the application MUST run the <span class="command"><strong>update-mime-database</strong></span> command,
which is provided by the freedesktop.org shared database[<a class="citation" href="index.html#idm46078813099152"><span class="citation">SharedMIME</span></a>].
		</p><p>
<span class="command"><strong>update-mime-database</strong></span> is passed the <code class="filename">mime</code>
directory containing the <code class="filename">packages</code> subdirectory which was
modified as its only argument. It scans all the XML files in the <code class="filename">packages</code>
subdirectory, combines the information in them, and creates a number of output files.
		</p><p>
Where the information from these files is conflicting, information from directories
lower in the list takes precedence.
Any file named <code class="filename">Override.xml</code> takes precedence over all other files in
the same <code class="filename">packages</code> directory. This can be used by
tools which let the user edit the database to ensure that the user's
changes take effect.
		</p><p>
The files created by <span class="command"><strong>update-mime-database</strong></span> are:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/globs</code> (contains a mapping from names to MIME types) [deprecated for globs2]
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/globs2</code> (contains a mapping from names to MIME types and glob weight)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/magic</code> (contains a mapping from file contents to MIME types)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/subclasses</code> (contains a mapping from MIME types to types they inherit from)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/aliases</code> (contains a mapping from aliases to MIME types)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/icons</code> (contains a mapping from MIME types to icons)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/generic-icons</code> (contains a mapping from MIME types to generic icons)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/XMLnamespaces</code> (contains a mapping from XML
(namespaceURI, localName) pairs to MIME types)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/MEDIA/SUBTYPE.xml</code> (one file for each MIME
type, giving details about the type, including comment, icon and generic-icon)
				</p></li><li class="listitem"><p>
<code class="filename">&lt;MIME&gt;/mime.cache</code> (contains the same information as the <code class="filename">globs2</code>,
<code class="filename">magic</code>, <code class="filename">subclasses</code>, <code class="filename">aliases</code>,
<code class="filename">icons</code>, <code class="filename">generic-icons</code> and <code class="filename">XMLnamespaces</code> files,
in a binary, mmappable format)
				</p></li></ul></div><p>
The format of these generated files and the source files in <code class="filename">packages</code>
are explained in the following sections. This step serves several purposes. First, it allows
applications to quickly get the data they need without parsing all the source XML files (the
base package alone is over 700K). Second, it allows the database to be used for other
purposes (such as creating the <code class="filename">/etc/mime.types</code> file if
desired). Third, it allows validation to be performed on the input data,
and removes the need for other applications to carefully check the input for
errors themselves.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078817906496"></a>The source XML files</h3></div></div></div><p>
Each application provides only a single XML source file, which is installed in the
<code class="filename">packages</code> directory as described above. This file is an XML file
whose document element is named <strong class="userinput"><code>mime-info</code></strong> and whose namespace URI
is <a class="ulink" href="http://www.freedesktop.org/standards/shared-mime-info" target="_top">http://www.freedesktop.org/standards/shared-mime-info</a>. All elements
described in this specification MUST have this namespace too.
		</p><p>
The document element may contain zero or more <strong class="userinput"><code>mime-type</code></strong> child nodes,
in any order, each describing a single MIME type. Each element has a <strong class="userinput"><code>type</code></strong>
attribute giving the MIME type that it describes.
		</p><p>
Each <strong class="userinput"><code>mime-type</code></strong> node may contain any combination of the following elements,
and in any order:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
<strong class="userinput"><code>glob</code></strong> elements have a <strong class="userinput"><code>pattern</code></strong> attribute. Any file
whose name matches this pattern will be given this MIME type (subject to conflicting rules in
other files, of course). There is also an optional <strong class="userinput"><code>weight</code></strong> attribute which
is used when resolving conflicts with other glob matches. The default weight value is 50, and
the maximum is 100.
		</p><p>
KDE's glob system replaces GNOME's and ROX's ext/regex fields, since it
is trivial to detect a pattern in the form '*.ext' and store it in an
extension hash table internally. The full power of regular expressions was
not being used by either desktop, and glob patterns are more suitable for
filename matching anyway.
		</p><p>
The first glob element represents the "main" extension for the file type.
While this doesn't affect the mimetype matching algorithm, this information can be useful
when a single main extension is needed for a mimetype, for instance so that applications
can choose an appropriate extension when saving a file.
				</p></li><li class="listitem"><p>
A <strong class="userinput"><code>glob-deleteall</code></strong> element, which indicates that patterns from
previously parsed directories must be discarded. The patterns defined in this file
(if any) are used instead.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>magic</code></strong> elements contain a list of
<strong class="userinput"><code>match</code></strong> elements, any of which may match, and an optional
<strong class="userinput"><code>priority</code></strong> attribute for all of the contained rules. Low
numbers should be used for more generic types (such as 'gzip compressed data')
and higher values for specific subtypes (such as a word processor format that
happens to use gzip to compress the file). The default priority value is 50, and
the maximum is 100.
				</p><p>
Each <strong class="userinput"><code>match</code></strong> element has a number of attributes:

</p><div class="informaltable"><table border="1" class="informaltable"><colgroup><col></col><col></col><col></col></colgroup><thead><tr><th>Attribute</th><th>Required?</th><th>Value</th></tr></thead><tbody><tr><td>type</td><td>Yes</td><td>
<strong class="userinput"><code>string</code></strong>, <strong class="userinput"><code>host16</code></strong>,
<strong class="userinput"><code>host32</code></strong>, <strong class="userinput"><code>big16</code></strong>,
<strong class="userinput"><code>big32</code></strong>, <strong class="userinput"><code>little16</code></strong>,
<strong class="userinput"><code>little32</code></strong> or <strong class="userinput"><code>byte</code></strong>.
	</td></tr><tr><td>offset</td><td>Yes</td><td>The byte offset(s)
	in the file to check. This may be a single number or a range in the
	form `start:end', indicating that all offsets in the range should be
	checked. The range is inclusive.</td></tr><tr><td>value</td><td>Yes</td><td>
	The value to compare the file contents with, in the format indicated by the type
	attribute. The string type supports the C character escapes (\0, \t, \n, \r, \xAB for hex, \777 for octal).
	</td></tr><tr><td>mask</td><td>No</td><td>
	The number to AND the value in the file with before comparing it to
	`value'. Masks for numerical types can be any number, while masks for strings
	must be in base 16, and start with 0x.
	</td></tr></tbody></table></div><p>

Each element corresponds to one line of
<span class="citerefentry"><span class="refentrytitle">file</span>(1)</span>'s <code class="filename">magic.mime</code> file.
They can be nested in the same way to provide the equivalent of continuation
lines. That is, &lt;a&gt;&lt;b/&gt;&lt;c/&gt;&lt;/a&gt; means 'a and (b or c)'.
				</p></li><li class="listitem"><p>
A <strong class="userinput"><code>magic-deleteall</code></strong> element, which indicates that magic matches from
previously parsed directories must be discarded. The magic defined in this file
(if any) is used instead.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>alias</code></strong> elements indicate that the type is also sometimes
known by another name, given by the <strong class="userinput"><code>type</code></strong> attribute. For
example, <strong class="userinput"><code>audio/midi</code></strong> has an alias of
<strong class="userinput"><code>audio/x-midi</code></strong>. Note that there should not be a
<strong class="userinput"><code>mime-type</code></strong> element defining each alias; a single
element defines the canonical name for the type and lists all its aliases.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>sub-class-of</code></strong> elements indicate that any data of this
type is also some other type, given by the <strong class="userinput"><code>type</code></strong>
attribute. See <a class="xref" href="index.html#subclassing" title="Subclassing">the section called “Subclassing”</a>.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>comment</code></strong> elements give a human-readable textual description of the MIME
type, usually composed of an acronym of the file name extension and a short description, like
"ODS spreadsheet".
There may be many of these elements with different <strong class="userinput"><code>xml:lang</code></strong> attributes
to provide the text in multiple languages.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>acronym</code></strong> elements give experienced users a terse idea of the document contents.
for example "ODS", "GEDCOM", "JPEG" and "XML".
There may be many of these elements with different <strong class="userinput"><code>xml:lang</code></strong> attributes
to provide the text in multiple languages, although these should only be used if absolutely necessary.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>expanded-acronym</code></strong> elements are the expanded versions of the acronym elements,
for example "OpenDocument Spreadsheet", "GEnealogical Data COMmunication", and "eXtensible Markup Language".
The purpose of these elements is to provide users a way to look up information on various MIME types or
file formats in third-party resources.
There may be many of these elements with different <strong class="userinput"><code>xml:lang</code></strong> attributes
to provide the text in multiple languages, although these should only be used if absolutely necessary.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>icon</code></strong> elements specify the icon to be used for this particular mime-type, given
by the <strong class="userinput"><code>name</code></strong> attribute. Generally the icon used for a mimetype is created
based on the mime-type by mapping "/" characters to "-", but users can override this by using
the <strong class="userinput"><code>icon</code></strong> element to customize the icon for a particular mimetype.
This element is not used in the system database, but only used in the user overridden database.
Only one <strong class="userinput"><code>icon</code></strong> element is allowed.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>generic-icon</code></strong> elements specify the icon to use as a generic icon for this
particular mime-type, given by the <strong class="userinput"><code>name</code></strong> attribute. This is used if there
is no specific icon (see <strong class="userinput"><code>icon</code></strong> for how these are found). These are
used for categories of similar types (like spreadsheets or archives) that can use a common icon.
The Icon Naming Specification lists a set of such icon names. If this element is not specified
then the mimetype is used to generate the generic icon by using the top-level media type (e.g.
"video" in "video/ogg") and appending "-x-generic" (i.e. "video-x-generic" in the previous example). 
Only one <strong class="userinput"><code>generic-icon</code></strong> element is allowed.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>root-XML</code></strong> elements have <strong class="userinput"><code>namespaceURI</code></strong> 
and <strong class="userinput"><code>localName</code></strong> attributes. If a file is identified as being an XML file,
these rules allow a more specific MIME type to be chosen based on the namespace and localname
of the document element.
				</p><p>
If <strong class="userinput"><code>localName</code></strong> is present but empty then the document element may have
any name, but the namespace must still match.
				</p></li><li class="listitem"><p>
<strong class="userinput"><code>treemagic</code></strong> elements contain a list of <strong class="userinput"><code>treematch</code></strong> elements,
any of which may match, and an optional <strong class="userinput"><code>priority</code></strong> attribute for all of the 
contained rules. The default priority value is 50, and the maximum is 100.
				</p><p>
Each <strong class="userinput"><code>treematch</code></strong> element has a number of attributes:

</p><div class="informaltable"><table border="1" class="informaltable"><colgroup><col></col><col></col><col></col></colgroup><thead><tr><th>Attribute</th><th>Required?</th><th>Value</th></tr></thead><tbody><tr><td>path</td><td>Yes</td><td>A path that must be present on the mounted volume/filesystem. The path is interpreted as a relative path starting at the root of the tested volume/filesystem</td></tr><tr><td>type</td><td>No</td><td>The type of path. Possible values: <strong class="userinput"><code>file</code></strong>, <strong class="userinput"><code>directory</code></strong>, <strong class="userinput"><code>link</code></strong></td></tr><tr><td>match-case</td><td>No</td><td>Whether path should be matched case-sensitively. Possible values: <strong class="userinput"><code>true</code></strong>, <strong class="userinput"><code>false</code></strong></td></tr><tr><td>executable</td><td>No</td><td>Whether the file must be executable. Possible values: <strong class="userinput"><code>true</code></strong>, <strong class="userinput"><code>false</code></strong></td></tr><tr><td>non-empty</td><td>No</td><td>Whether the directory must be non-empty. Possible values: <strong class="userinput"><code>true</code></strong>, <strong class="userinput"><code>false</code></strong></td></tr><tr><td>mimetype</td><td>No</td><td>The mimetype for the file at path</td></tr></tbody></table></div><p>

<strong class="userinput"><code>treematch</code></strong> elements can be nested, meaning that both the outer and the inner <strong class="userinput"><code>treematch</code></strong>
must be satisfied for a "match".
				</p></li></ul></div><p>
Applications may also define their own elements, provided they are namespaced to prevent collisions.
Unknown elements are copied directly to the output XML files like <strong class="userinput"><code>comment</code></strong>
elements. A typical use for this would be to indicate the default handler
application for a particular desktop
("Galeon is the GNOME default text/html browser"). Note that this doesn't
indicate the user's preferred application, only the (fixed) default.
		</p><p>
Here is an example source file, named <code class="filename">diff.xml</code>:
		</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;mime-info xmlns='http://www.freedesktop.org/standards/shared-mime-info'&gt;
  &lt;mime-type type="text/x-diff"&gt;
    &lt;comment&gt;Differences between files&lt;/comment&gt;
    &lt;comment xml:lang="af"&gt;verskille tussen lêers&lt;/comment&gt;
    ...
    &lt;magic priority="50"&gt;
      &lt;match type="string" offset="0" value="diff\t"/&gt;
      &lt;match type="string" offset="0" value="***\t"/&gt;
      &lt;match type="string" offset="0" value="Common subdirectories: "/&gt;
    &lt;/magic&gt;
    &lt;glob pattern="*.diff"/&gt;
    &lt;glob pattern="*.patch"/&gt;
  &lt;/mime-type&gt;
&lt;/mime-info&gt;
</pre><p>
		</p><p>
In practice, common types such as text/x-diff are provided by the freedesktop.org shared
database. Also, only new information needs to be provided, since this information will be merged
with other information about the same type.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813212384"></a>The MEDIA/SUBTYPE.xml files</h3></div></div></div><p>
These files have a <strong class="userinput"><code>mime-type</code></strong> element as the root node. The format is
as described above. They are created by merging all the <strong class="userinput"><code>mime-type</code></strong>
elements from the source files and creating one output file per MIME type. Each file may contain
information from multiple source files. The <strong class="userinput"><code>magic</code></strong>,
<strong class="userinput"><code>glob</code></strong> and <strong class="userinput"><code>root-XML</code></strong> elements will
have been removed.
		</p><p>
The example source file given above would (on its own) create an output file called
<code class="filename">&lt;MIME&gt;/text/x-diff.xml</code> containing the following:
			</p><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;mime-type xmlns="http://www.freedesktop.org/standards/shared-mime-info" type="text/x-diff"&gt;
&lt;!--Created automatically by update-mime-database. DO NOT EDIT!--&gt;
  &lt;comment&gt;Differences between files&lt;/comment&gt;
  &lt;comment xml:lang="af"&gt;verskille tussen lêers&lt;/comment&gt;
  ...
&lt;/mime-type&gt;

</pre><p>
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813205360"></a>The glob files</h3></div></div></div><p>
The globs2 file is a simple list of lines containing weight, MIME type and pattern, separated by a colon.
The lines are ordered by glob weight.
For example:
			</p><pre class="programlisting"># This file was automatically generated by the
# update-mime-database command. DO NOT EDIT!
...
55:text/x-diff:*.patch
50:text/x-diff:*.diff
50:text/x-c++src:*.C:cs
...
</pre><p>
		</p><p>
The glob file is a simple list of lines containing a MIME type and pattern, separated by a colon. It is
deprecated in favour of the globs2 file which also lists the weight of the glob rule.		
The lines are ordered by glob weight.
For example:
			</p><pre class="programlisting"># This file was automatically generated by the
# update-mime-database command. DO NOT EDIT!
...
text/x-diff:*.patch
text/x-diff:*.diff
...
</pre><p>
		</p><p>
Applications MUST match globs case-insensitively, except when the case-sensitive attribute
is set to true.
This is so that e.g. <code class="filename">main.C</code> will be seen as a C++ file,
but <code class="filename">IMAGE.GIF</code> will still use the *.gif pattern.
		</p><p>
If several patterns of the same weight match then the longest pattern SHOULD be used.
In particular, files with multiple extensions (such as
<code class="filename">Data.tar.gz</code>) MUST match the longest sequence of extensions
(eg '*.tar.gz' in preference to '*.gz'). Literal patterns (eg, 'Makefile') must
be matched before all others. It is suggested that patterns beginning with `*.'
and containing no other special characters (`*?[') should be placed in a hash
table for efficient lookup, since this covers the majority of the patterns. Thus,
patterns of this form should be matched before other wildcarded patterns.
		</p><p>
If a matching pattern is provided by two or more MIME types, applications
SHOULD not rely on one of them. They are instead supposed to use magic data
(see below) to detect the actual MIME type. This is for instance required to
deal with container formats like Ogg or AVI, that map various video and/or
audio-encoded data to one extension.
		</p><p>
There may be several rules mapping to the same type. They should all be merged.
If the same pattern is defined twice, then they MUST be ordered by the
directory the rule came from, as described above.
		</p><p>
The <strong class="userinput"><code>glob-deleteall</code></strong> element, which means that implementations
SHOULD discard information from previous directories, is written out into the globs2 file using
__NOGLOBS__ as the pattern. For instance:
			</p><pre class="programlisting">0:text/x-diff:__NOGLOBS__
50:text/x-diff:*.diff
...
</pre><p>
		</p><p>
In the above example, the mimetype text/x-diff is redefined (for instance in a user's
~/.local/share/mime) to only be associated with the pattern *.diff, so the other patterns
like *.patch were removed. The weight in front of the __NOGLOBS__ line is ignored.
In a given globs2 file, the __NOGLOBS__ line for a given mimetype is always written
out before any other globs for this mimetype.
		</p><p>
Lines beginning with `#' are comments and should be ignored. Everything from
the `:' character to the newline is part of the pattern; spaces should not be
stripped. The file is in the UTF-8 encoding. The format of the glob pattern
is as for fnmatch(3). The format does not allow a pattern to contain a literal
newline character, but this is not expected to be a problem.
		</p><p>
Common types (such as MS Word Documents) will be provided in the X Desktop
Group's package, which MUST be required by all applications using this
specification. Since each application will then only be providing information
about its own types, conflicts should be rare.
		</p><p>
The fourth field ("cs" in the first globs2 example) contains a list of comma-separated flags.
The flags currently defined are: cs (for case-sensitive). Implementations should ignore
unknown flags.
		</p><p>
Implementations should also ignore further fields, so that the syntax of the globs2 file
can be extended in the future. Example: "50:text/x-c++src:*.C:cs,newflag:newfeature:somethingelse"
should currently be parsed as "50:text/x-c++src:*.C:cs".
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813192976"></a>The magic files</h3></div></div></div><p>
The magic data is stored in a binary format for ease of parsing. The old magic database
had complex escaping rules; these are now handled by <span class="command"><strong>update-mime-database</strong></span>.
		</p><p>
The file starts with the magic string "MIME-Magic\0\n".
There is no version number in the file. Incompatible changes will be handled by
creating both the current `magic' file and a newer `magic2' in the new format.
Where possible, compatible changes only will be made.
All numbers are big-endian, so need to be byte-swapped on little-endian machines.
		</p><p>
The rest of the file is made up of a sequence of small sections.
Each section is introduced by giving the priority and type in brackets, followed by
a newline character. Higher priority entries come first. Example:
</p><pre class="screen">[50:text/x-diff]\n</pre><p>
Each line in the section takes the form:
</p><pre class="screen">[ indent ] "&gt;" start-offset "=" value
[ "&amp;" mask ] [ "~" word-size ] [ "+" range-length ] "\n"</pre><p>
</p><div class="informaltable"><table border="1" class="informaltable"><colgroup><col></col><col></col><col></col></colgroup><thead><tr><th>Part</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>indent</td><td>1</td><td>The nesting
	depth of the rule, corresponding to the number of '&gt;' characters in the traditional file format.</td></tr><tr><td>"&gt;" start-offset</td><td>&gt;4</td><td>The offset into the
	file to look for a match.</td></tr><tr><td>"=" value</td><td>=\0x0\0x2\0x55\0x40</td><td>
	Two bytes giving the (big-endian) length of the value, followed by the value itself.
	</td></tr><tr><td>"&amp;" mask</td><td>&amp;\0xff\0xf0</td><td>
	The mask, which (if present) is exactly the same length as the value.
	</td></tr><tr><td>"~" word-size</td><td>~2</td><td>On little-endian machines, the
	size of each group to byte-swap.</td></tr><tr><td>"+" range-length</td><td>+8</td><td>The length of the region
	in the file to check.
	</td></tr></tbody></table></div><p>
		</p><p>
Note that the value, value length and mask are all binary, whereas everything
else is textual. Each of the elements begins with a single character to
identify it, except for the indent level.
		</p><p>
The word size is used for byte-swapping. Little-endian systems should reverse
the order of groups of bytes in the value and mask if this is greater than one.
This only affects `host' matches (`big32' entries still have a word size of 1,
for example, because no swapping is necessary, whereas `host32' has a word size
of 4).
		</p><p>
The indent, range-length, word-size and mask components are optional. If
missing, indent defaults to 0, range-length to 1, the word-size to 1, and the
mask to all 'one' bits.
		</p><p>
Indent corresponds to the nesting depth of the rule. Top-level rules have an
indent of zero. The parent of an entry is the preceding entry with an indent
one less than the entry.
		</p><p>
If an unknown character is found where a newline is expected then the whole
line should be ignored (there will be no binary data after the new
character, so the next line starts after the next "\n" character). This is for
future extensions.
		</p><p>
The text/x-diff above example would (on its own) create this magic file:
			</p><pre class="programlisting">00000000  4d 49 4d 45 2d 4d 61 67  69 63 00 0a 5b 35 30 3a  |MIME-Magic..[50:|
00000010  74 65 78 74 2f 78 2d 64  69 66 66 5d 0a 3e 30 3d  |text/x-diff].&gt;0=|
00000020  00 05 64 69 66 66 09 0a  3e 30 3d 00 04 2a 2a 2a  |..diff..&gt;0=..***|
00000030  09 0a 3e 30 3d 00 17 43  6f 6d 6d 6f 6e 20 73 75  |..&gt;0=..Common su|
00000040  62 64 69 72 65 63 74 6f  72 69 65 73 3a 20 0a     |bdirectories: .|
</pre><p>
		</p><p>
The <strong class="userinput"><code>magic-deleteall</code></strong> attribute, which means that implementations
SHOULD discard information from previous directories, is written out into the magic file using
__NOMAGIC__ as the value:
</p><pre class="screen">&gt;0=__NOMAGIC__\n</pre><p>
This can be followed by other magic rules for the mimetype.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813174224"></a>The XMLnamespaces files</h3></div></div></div><p>
Each <code class="filename">XMLnamespaces</code> file is a list of lines in the form:
</p><pre class="screen">namespaceURI " " localName " " MIME-Type "\n"</pre><p>
For example:
</p><pre class="screen">http://www.w3.org/1999/xhtml html application/xhtml+xml
</pre><p>
The lines are sorted (using strcmp in the C locale) and there are no lines with the same namespaceURI and
localName in one file. If the localName was empty then there will be two spaces following
the namespaceURI.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813170880"></a>The icon files</h3></div></div></div><p>
The <code class="filename">icons</code> and <code class="filename">generic-icons</code> files are list of lines in the form:
</p><pre class="screen">MIME-Type ":" icon-name "\n"</pre><p>
For example:
</p><pre class="screen">application/msword:x-office-document
</pre><p>
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813167232"></a>The treemagic files</h3></div></div></div><p>
The tree magic data is stored in a file with a format that is very similar to the magic file format.
		</p><p>
The file starts with the magic string "MIME-TreeMagic\0\n". There is no version number in the file.
Incompatible changes will be handled by creating both the current `treemagic' and a newer `treemagic2' 
in the new format. Where possible, changes will be made in a compatible fashion. 
		</p><p>
The rest of the file is made up of a sequence of small sections. Each section is introduced by giving
the priority and type in brackets, followed by a newline character. Higher priority entries come
first. Example:
</p><pre class="screen">[50:x-content/image-dcf]\n</pre><p>
Each line in the section takes the form:
</p><pre class="screen">[ indent ] "&gt;" "\"" path "\"" "=" type [ "," option ]* "\n"</pre><p>
</p><div class="informaltable"><table border="1" class="informaltable"><colgroup><col></col><col></col></colgroup><thead><tr><th>Part</th><th>Meaning</th></tr></thead><tbody><tr><td>indent</td><td>The nesting depth of the rule.</td></tr><tr><td>path</td><td>The path to match.</td></tr><tr><td>type</td><td>The required file type, one of "file", "directory", "link" or "any"</td></tr><tr><td>option</td><td>Optional for the optional attributes of <strong class="userinput"><code>treematch</code></strong> elements. 
Possible values are "executable", "match-case", "non-empty", or a MIME type</td></tr></tbody></table></div><p>
		</p><p>
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813157200"></a>The mime.cache files</h3></div></div></div><p>
The <code class="filename">mime.cache</code> files contain the same information as the 
<code class="filename">globs2</code>, <code class="filename">magic</code>, <code class="filename">subclasses</code>, 
<code class="filename">aliases</code> and <code class="filename">XMLnamespaces</code> files, in a binary, 
mmappable format:
</p><pre class="programlisting">Header:
2			CARD16		MAJOR_VERSION	1
2			CARD16		MINOR_VERSION	2
4			CARD32		ALIAS_LIST_OFFSET
4			CARD32		PARENT_LIST_OFFSET
4			CARD32		LITERAL_LIST_OFFSET
4			CARD32		REVERSE_SUFFIX_TREE_OFFSET
4			CARD32		GLOB_LIST_OFFSET
4			CARD32		MAGIC_LIST_OFFSET
4			CARD32		NAMESPACE_LIST_OFFSET
4			CARD32		ICONS_LIST_OFFSET
4			CARD32		GENERIC_ICONS_LIST_OFFSET

AliasList:
4			CARD32		N_ALIASES
8*N_ALIASES		AliasListEntry

AliasListEntry:
4			CARD32		ALIAS_OFFSET
4			CARD32		MIME_TYPE_OFFSET

ParentList:
4			CARD32		N_ENTRIES 
8*N_ENTRIES		ParentListEntry

ParentListEntry:
4			CARD32		MIME_TYPE_OFFSET
4			CARD32		PARENTS_OFFSET

Parents:
4			CARD32		N_PARENTS
4*N_PARENTS		CARD32		MIME_TYPE_OFFSET

LiteralList:
4			CARD32		N_LITERALS
12*N_LITERALS		LiteralEntry	

LiteralEntry:
4			CARD32		LITERAL_OFFSET
4			CARD32		MIME_TYPE_OFFSET
4			CARD32		WEIGHT in lower 8 bits
                                        FLAGS in rest:
                                        0x100 = case-sensitive


GlobList:
4			CARD32		N_GLOBS
12*N_GLOBS		GlobEntry	

GlobEntry:
4			CARD32		GLOB_OFFSET
4			CARD32		MIME_TYPE_OFFSET
4			CARD32		WEIGHT in lower 8 bits
                                        FLAGS in rest:
                                        0x100 = case-sensitive

ReverseSuffixTree:
4			CARD32		N_ROOTS
4	 		CARD32		FIRST_ROOT_OFFSET

ReverseSuffixTreeNode:
4			CARD32		CHARACTER
4			CARD32		N_CHILDREN			
4			CARD32		FIRST_CHILD_OFFSET

ReverseSuffixTreeLeafNode:
4			CARD32		0 
4			CARD32		MIME_TYPE_OFFSET
4			CARD32		WEIGHT in lower 8 bits
                                        FLAGS in rest:
                                        0x100 = case-sensitive

MagicList:
4			CARD32		N_MATCHES
4			CARD32		MAX_EXTENT
4			CARD32		FIRST_MATCH_OFFSET

Match:
4			CARD32		PRIORITY
4			CARD32		MIME_TYPE_OFFSET
4			CARD32		N_MATCHLETS
4			CARD32		FIRST_MATCHLET_OFFSET

Matchlet:
4			CARD32		RANGE_START
4			CARD32		RANGE_LENGTH
4			CARD32		WORD_SIZE
4			CARD32		VALUE_LENGTH
4			CARD32		VALUE_OFFSET
4			CARD32		MASK_OFFSET (0 if no mask)
4			CARD32		N_CHILDREN
4			CARD32		FIRST_CHILD_OFFSET

NamespaceList:
4			CARD32		N_NAMESPACES
12*N_NAMESPACES		NamespaceEntry	

NamespaceEntry:
4			CARD32		NAMESPACE_URI_OFFSET
4			CARD32		LOCAL_NAME_OFFSET
4			CARD32		MIME_TYPE_OFFSET

GenericIconsList:
IconsList:
4			CARD32		N_ICONS
8*N_ICONS		IconListEntry

IconListEntry:
4			CARD32		MIME_TYPE_OFFSET
4			CARD32		ICON_NAME_OFFSET
</pre><p>
Lists in the file are sorted, to enable binary searching. The list of 
aliases is sorted by alias, the list of literal globs is sorted by the 
literal. The SuffixTreeNode siblings are sorted by character. 
The list of namespaces is sorted by namespace uri. The list of icons
is sorted by mimetype.
</p><p>
Mimetypes are stored in the suffix tree by appending suffix
tree leaf nodes with '\0' as character. These nodes appear at the
beginning of the list of children.
</p><p>
All offsets are in bytes from the beginning of the file.
</p><p>
Strings are zero-terminated.
</p><p>
All numbers are in network (big-endian) order. This is necessary because the data will be stored in 
arch-independent directories like <code class="filename">/usr/share/mime</code> or even in user's home directories.
</p><p>
Cache files have to be written atomically - write to a temporary name, then move over the old file - so 
that clients that have the old cache file open and mmap'ed won't get corrupt data.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813145584"></a>Storing the MIME type using Extended Attributes</h3></div></div></div><p>
An implementation MAY also get a file's MIME type from the
<strong class="userinput"><code>user.mime_type</code></strong> extended attribute.  The type given here should normally be used in
preference to any guessed type, since the user is able to set it explicitly.
Applications MAY choose to set the type when saving files. Since many
applications and filesystems do not support extended attributes,
implementations MUST NOT rely on this method being available.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="subclassing"></a>Subclassing</h3></div></div></div><p>
A type is a subclass of another type if any instance of the first type is
also an instance of the second. For example, all image/svg+xml files are also
application/xml, text/plain and application/octet-stream files. Subclassing is about
the format, rather than the category of the data (for example, there is no
'generic spreadsheet' class that all spreadsheets inherit from).
		</p><p>
Some subclass rules are implicit:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>All text/* types are subclasses of text/plain.</p></li><li class="listitem"><p>All streamable types (ie, everything except the inode/* types)
are subclasses of application/octet-stream.</p></li></ul></div><p>
In addition to these rules, explicit subclass information may be given using
the <strong class="userinput"><code>sub-class-of</code></strong> element.
		</p><p>
Note that some file formats are also compressed files (application/x-jar files
are also application/zip files). However, this is different to a case such as a
compressed postscript file, which is not a valid postscript file itself (so
application/x-gzpostscript does not inherit from application/postscript,
because an application that can handle the latter may not cope with the
former).
		</p><p>
Some types may or may not be instances of other types. For example, a
spreadsheet file may be compressed or not. It is a valid spreadsheet file
either way, but only inherits from application/gzip in one case. This
information cannot be represented statically; instead an application
interested in this information should run all of the magic rules, and
use the list of types returned as the subclasses.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813138336"></a>Recommended checking order</h3></div></div></div><p>
Because different applications have different requirements, they may choose to
use the various methods provided by this specification in any order. However, the
RECOMMENDED order to perform the checks is:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
If a MIME type is provided explicitly (eg, by a ContentType HTTP header, a MIME
email attachment, an extended attribute or some other means) then that should
be used instead of guessing.
				</p></li><li class="listitem"><p>
Otherwise, start by doing a glob match of the filename. Keep only globs with the biggest weight.
If the patterns are different, keep only globs with the longest pattern, as previously discussed.
If after this, there is one or more matching glob, and all the matching globs
result in the same mimetype, use that mimetype as the result.
				</p></li><li class="listitem"><p>
If the glob matching fails or results in multiple conflicting mimetypes, read the
contents of the file and do magic sniffing on it. If no magic rule matches the data (or if
the content is not available), use the default type of application/octet-stream for
binary data, or text/plain for textual data. If there was no glob match, use the magic match
as the result. 
				</p><p>
Note: Checking the first 128 bytes of the file for ASCII control characters is
a good way to guess whether a file is binary or text, but note that files with high-bit-set
characters should still be treated as text since these can appear in UTF-8 text,
unlike control characters.
				</p></li><li class="listitem"><p>
If any of the mimetypes resulting from a glob match is equal to or a subclass of
the result from the magic sniffing, use this as the result. This allows us for example to
distinguish text files called "foo.doc" from MS-Word files with the same name, as the
magic match for the MS-Word file would be application/x-ole-storage which the MS-Word type
inherits.
				</p></li><li class="listitem"><p>
Otherwise use the result of the glob match that has the highest weight.
				</p></li></ul></div><p>
		</p><p>
There are several reasons for checking the glob patterns before the magic.
First of all doing magic sniffing is very expensive as reading the contents of the files
causes a lot of seeks, which is very expensive. Secondly, some applications don't check
the magic at all (sometimes the content is not available or too slow to read), and this
makes it more likely that both will get the same type.
		</p><p>
Also, users can easily understand why calling their
text file <code class="filename">README.mp3</code> makes the system think it's an MP3,
whereas they have trouble understanding why their computer thinks
<code class="filename">README.txt</code> is a PostScript file. If the system guesses wrongly,
the user can often rename the file to fix the problem.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813129696"></a>Non-regular files</h3></div></div></div><p>
Sometimes it is useful to assign MIME types to other objects in the filesystem,
such as directories, sockets and device files. This could be useful when looking up
an icon for a type, or for providing a textual description of one of these objects.
The media type 'inode' is provided for this purpose, with the following types corresponding
to the standard types of object found in a Unix filesystem:
		</p><table border="0" class="simplelist" summary="Simple list"><tbody><tr><td>inode/blockdevice</td></tr><tr><td>inode/chardevice</td></tr><tr><td>inode/directory</td></tr><tr><td>inode/fifo</td></tr><tr><td>inode/mount-point</td></tr><tr><td>inode/socket</td></tr><tr><td>inode/symlink</td></tr></tbody></table><p>
An inode/mount-point is a subclass of inode/directory. It can be useful when adding extra
actions for these directories, such as 'mount' or 'eject'. Mounted directories can be
detected by comparing the 'st_dev' of a directory with that of its parent. If
they differ, they are from different devices and the directory is a mount
point.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813124432"></a>Content types for volumes</h3></div></div></div><p>
Traditional MIME types apply to individual files or bytestreams. It is often useful 
to apply the same methodologies when classifying the content of mountable volumes or 
filesystems. The x-content type has been introduced for this purpose. Typical examples 
are x-content/audio-dvd, x-content/blank-cd or x-content/image-dcf. 
		</p><p>
Matching of content types works with <strong class="userinput"><code>treemagic</code></strong> elements, which 
are analogous to the <strong class="userinput"><code>magic</code></strong> elements used for MIME type matching.
Instead of looking for byte sequences in files, <strong class="userinput"><code>treemagic</code></strong> elements
allow to look for files with certain names, permissions or mime types in a directory
hierarchy.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813120800"></a>URI scheme handlers</h3></div></div></div><p>
URI scheme handling (such as a movie player handling mms:// URIs, or a Podcast program 
handling feed:// URIs) are handled through applications handling the x-scheme-handler/foo
mime-type, where foo is the URI scheme in question.
		</p><p>
This scheme allows URI scheme handling to enjoy the same benefits as mime-type handlers,
such as the ability to change the default handler, the cross-desktop support, and
easier application launching.
		</p><p>
Note that this virtual mime-type is not for listing URI schemes that an application 
can load files from. For example, a movie player would not list x-scheme-handler/http 
in its supported mime-types, but it would list x-scheme-handler/rtsp if it supported 
playing back from RTSP locations.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813118320"></a>Security implications</h3></div></div></div><p>
The system described in this document is intended to allow different programs
to see the same file as having the same type. This is to help interoperability.
The type determined in this way is only a guess, and an application MUST NOT
trust a file based simply on its MIME type. For example, a downloader should
not pass a file directly to a launcher application without confirmation simply
because the type looks `harmless' (eg, text/plain).
		</p><p>
Do not rely on two applications getting the same type for the same file, even
if they both use this system. The spec allows some leeway in implementation,
and in any case the programs may be following different versions of the spec.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46078813116064"></a>User modification</h3></div></div></div><p>
The MIME database is NOT intended to store user preferences. Users should never
edit the database. If they wish to make corrections or provide MIME entries for
software that doesn't provide these itself, they should do so by means of the
Override.xml mentioned in <a class="xref" href="index.html#s2_layout" title="Directory layout">the section called “Directory layout”</a>. Information such as
"text/html files need to be opened with Mozilla" should NOT go in the database.
		</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46078813113872"></a>Contributors</h2></div></div></div><table border="0" class="simplelist" summary="Simple list"><tbody><tr><td>
			Thomas Leonard <code class="email">&lt;<a class="email" href="mailto:tal197%20at%20users.sf.net">tal197 at users.sf.net</a>&gt;</code>
		</td></tr><tr><td>
			David Faure <code class="email">&lt;<a class="email" href="mailto:faure%20at%20kde.org">faure at kde.org</a>&gt;</code>
		</td></tr><tr><td>
			Alex Larsson <code class="email">&lt;<a class="email" href="mailto:alexl%20at%20redhat.com">alexl at redhat.com</a>&gt;</code>
		</td></tr><tr><td>
			Seth Nickell <code class="email">&lt;<a class="email" href="mailto:snickell%20at%20stanford.edu">snickell at stanford.edu</a>&gt;</code>
		</td></tr><tr><td>
			Keith Packard <code class="email">&lt;<a class="email" href="mailto:keithp%20at%20keithp.com">keithp at keithp.com</a>&gt;</code>
		</td></tr><tr><td>
			Filip Van Raemdonck <code class="email">&lt;<a class="email" href="mailto:mechanix%20at%20debian.org">mechanix at debian.org</a>&gt;</code>
		</td></tr><tr><td>
			Christos Zoulas <code class="email">&lt;<a class="email" href="mailto:christos%20at%20zoulas.com">christos at zoulas.com</a>&gt;</code>
		</td></tr><tr><td>
			Matthias Clasen <code class="email">&lt;<a class="email" href="mailto:mclasen%20at%20redhat.com">mclasen at redhat.com</a>&gt;</code>
		</td></tr><tr><td>
			Bastien Nocera <code class="email">&lt;<a class="email" href="mailto:hadess%20at%20hadess.net">hadess at hadess.net</a>&gt;</code>
		</td></tr></tbody></table></div><div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a name="idm46078813105568"></a>References</h2></div></div></div><div class="bibliomixed"><a name="idm46078813104928"></a><p class="bibliomixed">[<abbr class="abbrev">GNOME</abbr>] 
		<span class="citetitle"><em class="citetitle">The GNOME desktop,
		<a class="ulink" href="http://www.gnome.org" target="_top">http://www.gnome.org</a></em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813103536"></a><p class="bibliomixed">[<abbr class="abbrev">KDE</abbr>] 
		<span class="citetitle"><em class="citetitle">The KDE desktop,
		<a class="ulink" href="http://www.kde.org" target="_top">http://www.kde.org</a></em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813102144"></a><p class="bibliomixed">[<abbr class="abbrev">ROX</abbr>] 
		<span class="citetitle"><em class="citetitle">The ROX desktop,
		<a class="ulink" href="http://rox.sourceforge.net" target="_top">http://rox.sourceforge.net</a></em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813100752"></a><p class="bibliomixed">[<abbr class="abbrev">DesktopEntries</abbr>] 
		<span class="citetitle"><em class="citetitle">Desktop Entry Specification,
		<a class="ulink" href="http://www.freedesktop.org/standards/desktop-entry-spec.html" target="_top">http://www.freedesktop.org/standards/desktop-entry-spec.html</a>
		</em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813099152"></a><p class="bibliomixed">[<abbr class="abbrev">SharedMIME</abbr>] 
		<span class="citetitle"><em class="citetitle">Shared MIME-info Database,
		<a class="ulink" href="http://www.freedesktop.org/standards/shared-mime-info.html" target="_top">http://www.freedesktop.org/standards/shared-mime-info.html</a>
		</em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813097552"></a><p class="bibliomixed">[<abbr class="abbrev">RFC-2119</abbr>] 
		
		<span class="citetitle"><em class="citetitle">Key words for use in RFCs to Indicate Requirement Levels,
		<a class="ulink" href="http://www.ietf.org/rfc/rfc2119.txt?number=2119" target="_top">http://www.ietf.org/rfc/rfc2119.txt?number=2119</a>
		</em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813095824"></a><p class="bibliomixed">[<abbr class="abbrev">BaseDir</abbr>] 
		
		<span class="citetitle"><em class="citetitle">XDG Base Directory Specification
		<a class="ulink" href="http://www.freedesktop.org/standards/basedir/draft/basedir-spec/basedir-spec.html" target="_top">http://www.freedesktop.org/standards/basedir/draft/basedir-spec/basedir-spec.html</a>
		</em></span>
	</p></div><div class="bibliomixed"><a name="idm46078813094080"></a><p class="bibliomixed">[<abbr class="abbrev">ACAP</abbr>] 
		
		<span class="citetitle"><em class="citetitle">ACAP Media Type Dataset Class
		<a class="ulink" href="ftp://ftp.ietf.org/internet-drafts/draft-ietf-acap-mediatype-01.txt" target="_top">ftp://ftp.ietf.org/internet-drafts/draft-ietf-acap-mediatype-01.txt</a>
		</em></span>
	</p></div></div></div></div><div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="index.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
