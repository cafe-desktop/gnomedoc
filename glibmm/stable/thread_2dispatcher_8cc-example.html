<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../../skin/doxygen.css" type="text/css"></link><link rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/lgo2010.css"></link><link rel="icon" type="image/png" href="../../skin/gnome-16.png"></link><link rel="SHORTCUT ICON" type="image/png" href="../../skin/gnome-16.png"></link><link rel="search" type="application/opensearchdescription+xml" href="../../gnome-library-search.xml" title="GNOME Library Search"></link><link rel="stylesheet" type="text/css" href="../../skin/jquery.autocomplete.css"></link><script type="text/javascript" src="../../js/jquery.js"></script><script type="text/javascript" src="../../js/jquery.autocomplete.js"></script><title>glibmm: thread/dispatcher.cc</title><link rel="stylesheet" type="text/css" media="all" href="../../skin/jquery.autocomplete.css"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/960_24_col.css"></link><script type="text/javascript" src="../../js/jquery.js"></script><script type="text/javascript" src="https://developer-old.gnome.org/js/jquery.jcarousel.min.js"></script><script type="text/javascript" src="../../js/jquery.autocomplete.js"></script></head><body><div id="accessibility_access"><ul><li><a href="thread_2dispatcher_8cc-example.html#container">Go to page content</a></li><li><a href="thread_2dispatcher_8cc-example.html#top_bar">Go to main menu</a></li><li><a href="thread_2dispatcher_8cc-example.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/symbols/"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form><script type="text/javascript">
$('#s').autocomplete('/symbols/lookup/',
        { minChars:3, matchSubset:1, matchContains:1, cacheLength:10,
          selectOnly:1, rowsLimit:25 });
              </script></div></div></div><div class="clearfix"></div><div id="container" class="gtkmm"><div class="content"><h1 class="lgotitle">glibmm: thread/dispatcher.cc</h1><div id="content"><div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div><div class="contents">
<p>A <a class="el" href="classGlib_1_1Dispatcher.html" title="Signal class for inter-thread communication. ">Glib::Dispatcher</a> example.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Glib::Dispatcher example -- cross thread signalling</span></div><div class="line"><span class="comment"> * by Daniel Elstner  &lt;daniel.kitta@gmail.com&gt;</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * modified to only use glibmm</span></div><div class="line"><span class="comment"> * by J. Abelardo Gutierrez &lt;jabelardo@cantv.net&gt;</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Copyright (c) 2002-2003  Free Software Foundation</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;glibmm.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00038.html">algorithm</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00071.html">functional</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00086.html">iostream</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00158.html">thread</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00182.html">vector</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span></div><div class="line">{</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Note that it does not make sense for this class to inherit from</span></div><div class="line"><span class="comment"> * sigc::trackable, as doing so would only give a false sense of security.</span></div><div class="line"><span class="comment"> * Once the thread launch has been triggered, the object has to stay alive</span></div><div class="line"><span class="comment"> * until the thread has been joined again.  The code running in the thread</span></div><div class="line"><span class="comment"> * assumes the existence of the object.  If it is destroyed earlier, the</span></div><div class="line"><span class="comment"> * program will crash, with sigc::trackable or without it.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">class </span>ThreadProgress</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">explicit</span> ThreadProgress(<span class="keywordtype">int</span> the_id);</div><div class="line">  ~ThreadProgress();</div><div class="line"></div><div class="line">  <span class="keywordtype">int</span> id() <span class="keyword">const</span>;</div><div class="line">  <span class="keywordtype">void</span> <a name="a0"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01475.html#ga6f4ad125d364f01560e2ed20a3c8bb5b">launch</a>();</div><div class="line">  <span class="keywordtype">void</span> join();</div><div class="line">  <span class="keywordtype">bool</span> unfinished() <span class="keyword">const</span>;</div><div class="line"></div><div class="line">  sigc::signal&lt;void()&gt;&amp; signal_finished();</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="keyword">enum</span></div><div class="line">  {</div><div class="line">    ITERATIONS = 100</div><div class="line">  };</div><div class="line"></div><div class="line">  <span class="comment">// Note that the thread does not write to the member data at all.  It only</span></div><div class="line">  <span class="comment">// reads signal_increment_, which is only written to before the thread is</span></div><div class="line">  <span class="comment">// launched.  Therefore, no locking is required.</span></div><div class="line">  <a name="_a1"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a02972.html">std::thread</a>* thread_;</div><div class="line">  <span class="keywordtype">int</span> id_;</div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> progress_;</div><div class="line">  <a name="_a2"></a><a class="code" href="classGlib_1_1Dispatcher.html">Glib::Dispatcher</a> signal_increment_;</div><div class="line">  sigc::signal&lt;void()&gt; signal_finished_;</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> progress_increment();</div><div class="line">  <span class="keywordtype">void</span> thread_function();</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>Application : <span class="keyword">public</span> <a name="_a3"></a><a class="codeRef" doxygen="libsigc++-3.0.tag:http://library.gnome.org/devel/libsigc++/unstable/" href="http://library.gnome.org/devel/libsigc++/unstable/structsigc_1_1trackable.html">sigc::trackable</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Application();</div><div class="line">  ~Application();</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> run();</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <a name="_a4"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a05936.html">Glib::RefPtr&lt;Glib::MainLoop&gt;</a> main_loop_;</div><div class="line">  <a name="_a5"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a06912.html">std::vector&lt;ThreadProgress*&gt;</a> progress_threads_;</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> launch_threads();</div><div class="line">  <span class="keywordtype">void</span> on_progress_finished(ThreadProgress* thread_progress);</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><span class="keyword">class </span>DeletePtr</div><div class="line">{</div><div class="line">  <span class="keyword">typedef</span> <span class="keywordtype">void</span> argument_type;</div><div class="line">  <span class="keyword">typedef</span> T result_type;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keywordtype">void</span> operator()(T ptr)<span class="keyword"> const </span>{ <span class="keyword">delete</span> ptr; }</div><div class="line">};</div><div class="line"></div><div class="line">ThreadProgress::ThreadProgress(<span class="keywordtype">int</span> the_id) : thread_(<span class="keyword">nullptr</span>), id_(the_id), progress_(0)</div><div class="line">{</div><div class="line">  <span class="comment">// Connect to the cross-thread signal.</span></div><div class="line">  signal_increment_.connect(<a name="a6"></a><a class="codeRef" doxygen="libsigc++-3.0.tag:http://library.gnome.org/devel/libsigc++/unstable/" href="http://library.gnome.org/devel/libsigc++/unstable/group__mem__fun.html#ga5d28dcf1bb88830a6e50d08d1fe7ec08">sigc::mem_fun</a>(*<span class="keyword">this</span>, &amp;ThreadProgress::progress_increment));</div><div class="line">}</div><div class="line"></div><div class="line">ThreadProgress::~ThreadProgress()</div><div class="line">{</div><div class="line">  <span class="comment">// It is an error if the thread is still running at this point.</span></div><div class="line">  g_return_if_fail(thread_ == <span class="keyword">nullptr</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span></div><div class="line">ThreadProgress::id()<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">  <span class="keywordflow">return</span> id_;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line"><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01475.html#ga6f4ad125d364f01560e2ed20a3c8bb5b">ThreadProgress::launch</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// Create a joinable thread.</span></div><div class="line">  thread_ = <span class="keyword">new</span> <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a02972.html">std::thread</a>([<span class="keyword">this</span>]() { thread_function(); });</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">ThreadProgress::join()</div><div class="line">{</div><div class="line">  thread_-&gt;join();</div><div class="line">  <span class="keyword">delete</span> thread_;</div><div class="line">  thread_ = <span class="keyword">nullptr</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">bool</span></div><div class="line">ThreadProgress::unfinished()<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">  <span class="keywordflow">return</span> (progress_ &lt; ITERATIONS);</div><div class="line">}</div><div class="line"></div><div class="line">sigc::signal&lt;void()&gt;&amp;</div><div class="line">ThreadProgress::signal_finished()</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> signal_finished_;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">ThreadProgress::progress_increment()</div><div class="line">{</div><div class="line">  ++progress_;</div><div class="line">  <a name="a7"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01544.html#aaf93fdf0812752e0e02c501dea1b38f0">std::cout</a> &lt;&lt; <span class="stringliteral">"Thread "</span> &lt;&lt; id_ &lt;&lt; <span class="stringliteral">": "</span> &lt;&lt; progress_ &lt;&lt; <span class="charliteral">'%'</span> &lt;&lt; <a name="a8"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01544.html#a8b3758bb8f17c440c7963363f42f69f3">std::endl</a>;</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span> (progress_ &gt;= ITERATIONS)</div><div class="line">    signal_finished_();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">ThreadProgress::thread_function()</div><div class="line">{</div><div class="line">  <a name="_a9"></a><a class="code" href="classGlib_1_1Rand.html">Glib::Rand</a> rand;</div><div class="line"></div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; ITERATIONS; ++i)</div><div class="line">  {</div><div class="line">    <a name="a10"></a><a class="code" href="namespaceGlib.html#a5d75264c8b47f13fb33f973b0d4fc73e">Glib::usleep</a>(rand.<a name="a11"></a><a class="code" href="classGlib_1_1Rand.html#a182b9a36db153d316baf5efb1ece9fd7">get_int_range</a>(2000, 20000));</div><div class="line"></div><div class="line">    <span class="comment">// Tell the main thread to increment the progress value.</span></div><div class="line">    signal_increment_();</div><div class="line">  }</div><div class="line">}</div><div class="line"></div><div class="line">Application::Application() : main_loop_(<a name="a12"></a><a class="code" href="classGlib_1_1MainLoop.html#a37a1dcf3cb167cf02260111f533d0b5b">Glib::MainLoop::create</a>()), progress_threads_(5)</div><div class="line">{</div><div class="line">  <span class="keywordflow">try</span></div><div class="line">  {</div><div class="line">    <span class="keywordflow">for</span> (<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a06912.html">std::vector&lt;ThreadProgress*&gt;::size_type</a> i = 0; i &lt; progress_threads_.<a name="a13"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a06912.html#aedc1ee21f6ca2b8304b4f1f430125c8d">size</a>(); ++i)</div><div class="line">    {</div><div class="line">      ThreadProgress* <span class="keyword">const</span> progress = <span class="keyword">new</span> ThreadProgress(i + 1);</div><div class="line">      progress_threads_[i] = progress;</div><div class="line"></div><div class="line">      progress-&gt;signal_finished().connect(</div><div class="line">        <a name="a14"></a><a class="codeRef" doxygen="libsigc++-3.0.tag:http://library.gnome.org/devel/libsigc++/unstable/" href="http://library.gnome.org/devel/libsigc++/unstable/group__bind.html#ga9eea3bc8bc476fbb7f9ab3904775287e">sigc::bind</a>(<a class="codeRef" doxygen="libsigc++-3.0.tag:http://library.gnome.org/devel/libsigc++/unstable/" href="http://library.gnome.org/devel/libsigc++/unstable/group__mem__fun.html#ga5d28dcf1bb88830a6e50d08d1fe7ec08">sigc::mem_fun</a>(*<span class="keyword">this</span>, &amp;Application::on_progress_finished), progress));</div><div class="line">    }</div><div class="line">  }</div><div class="line">  <span class="keywordflow">catch</span> (...)</div><div class="line">  {</div><div class="line">    <span class="comment">// In your own code, you should preferably use a smart pointer</span></div><div class="line">    <span class="comment">// to ensure exception safety.</span></div><div class="line">    <a name="a15"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01487.html#ga36d3b88a382b4ad3bf55aff3f597522d">std::for_each</a>(progress_threads_.begin(), progress_threads_.end(), DeletePtr&lt;ThreadProgress*&gt;());</div><div class="line">    <span class="keywordflow">throw</span>;</div><div class="line">  }</div><div class="line">}</div><div class="line"></div><div class="line">Application::~Application()</div><div class="line">{</div><div class="line">  <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01487.html#ga36d3b88a382b4ad3bf55aff3f597522d">std::for_each</a>(progress_threads_.begin(), progress_threads_.end(), DeletePtr&lt;ThreadProgress*&gt;());</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">Application::run()</div><div class="line">{</div><div class="line">  <span class="comment">// Install a one-shot idle handler to launch the threads.</span></div><div class="line">  <a name="a16"></a><a class="code" href="group__MainLoop.html#ga76792522d9680a05e232d3519a25f98d">Glib::signal_idle</a>().<a name="a17"></a><a class="code" href="classGlib_1_1SignalIdle.html#adeff0ddfe5eff1e0dd8302401437d8bc">connect_once</a>(<a class="codeRef" doxygen="libsigc++-3.0.tag:http://library.gnome.org/devel/libsigc++/unstable/" href="http://library.gnome.org/devel/libsigc++/unstable/group__mem__fun.html#ga5d28dcf1bb88830a6e50d08d1fe7ec08">sigc::mem_fun</a>(*<span class="keyword">this</span>, &amp;Application::launch_threads));</div><div class="line"></div><div class="line">  main_loop_-&gt;run();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">Application::launch_threads()</div><div class="line">{</div><div class="line">  <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01544.html#aaf93fdf0812752e0e02c501dea1b38f0">std::cout</a> &lt;&lt; <span class="stringliteral">"Launching "</span> &lt;&lt; progress_threads_.size() &lt;&lt; <span class="stringliteral">" threads:"</span> &lt;&lt; <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01544.html#a8b3758bb8f17c440c7963363f42f69f3">std::endl</a>;</div><div class="line"></div><div class="line">  <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01487.html#ga36d3b88a382b4ad3bf55aff3f597522d">std::for_each</a>(</div><div class="line">    progress_threads_.begin(), progress_threads_.end(), <a name="a18"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01502.html#gadd917dd05154842bc6aebcf5c90abb7f">std::mem_fn</a>(&amp;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01475.html#ga6f4ad125d364f01560e2ed20a3c8bb5b">ThreadProgress::launch</a>));</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">Application::on_progress_finished(ThreadProgress* thread_progress)</div><div class="line">{</div><div class="line">  thread_progress-&gt;join();</div><div class="line"></div><div class="line">  <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01544.html#aaf93fdf0812752e0e02c501dea1b38f0">std::cout</a> &lt;&lt; <span class="stringliteral">"Thread "</span> &lt;&lt; thread_progress-&gt;id() &lt;&lt; <span class="stringliteral">": finished."</span> &lt;&lt; <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01544.html#a8b3758bb8f17c440c7963363f42f69f3">std::endl</a>;</div><div class="line"></div><div class="line">  <span class="comment">// Quit if it was the last thread to be joined.</span></div><div class="line">  <span class="keywordflow">if</span> (<a name="a19"></a><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01487.html#gaaf6e9995ebbd27994d7c73b375f86088">std::find_if</a>(progress_threads_.begin(), progress_threads_.end(),</div><div class="line">        <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01502.html#gadd917dd05154842bc6aebcf5c90abb7f">std::mem_fn</a>(&amp;ThreadProgress::unfinished)) == progress_threads_.end())</div><div class="line">  {</div><div class="line">    main_loop_-&gt;quit();</div><div class="line">  }</div><div class="line">}</div><div class="line"></div><div class="line">} <span class="comment">// anonymous namespace</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span></div><div class="line">main(<span class="keywordtype">int</span>, <span class="keywordtype">char</span>**)</div><div class="line">{</div><div class="line">  <a name="a20"></a><a class="code" href="namespaceGlib.html#ac90aee10d0b90e3d8a96a86b5394f87b">Glib::init</a>();</div><div class="line"></div><div class="line">  Application application;</div><div class="line">  application.run();</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div></div></div><div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="thread_2dispatcher_8cc-example.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
