<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>IPv6: GNet Network Library Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="GNet Network Library Reference Manual">
<link rel="up" href="libgnet-reference.html" title="GNet Library Reference">
<link rel="prev" href="gnet-unix.html" title="Unix">
<link rel="next" href="gnet-socks.html" title="SOCKS">
<meta xmlns="http://www.w3.org/1999/xhtml" name="generator" content='GTK-Doc V"(~lgo)" (XML mode)'></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" media="all" href="../../skin/lgo2010.css"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="icon" type="image/png" href="../../skin/gnome-16.png"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="SHORTCUT ICON" type="image/png" href="../../skin/gnome-16.png"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="search" type="application/opensearchdescription+xml" href="../../gnome-library-search.xml" title="GNOME Library Search"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../../skin/jquery.autocomplete.css"></link><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../js/jquery.js"></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../js/jquery.autocomplete.js"></script><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="gnet-overview.html" title="GNet Overview"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="gnet-developers.html" title="GNet for developers"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="gnet-examples.html" title="GNet Examples"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="libgnet-reference.html" title="GNet Library Reference"></link>
</head>
<body><div id="accessibility_access"><ul><li><a href="gnet-ipv6.html#container">Go to page content</a></li><li><a href="gnet-ipv6.html#top_bar">Go to main menu</a></li><li><a href="gnet-ipv6.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/symbols/"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form><script type="text/javascript">
$('#s').autocomplete('/symbols/lookup/',
        { minChars:3, matchSubset:1, matchContains:1, cacheLength:10,
          selectOnly:1, rowsLimit:25 });
              </script></div></div></div><div class="clearfix"></div><div id="container"><table xmlns="" class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="gnet-ipv6.html#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="gnet-ipv6.html#gnet-ipv6.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="libgnet-reference.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="gnet-unix.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="gnet-socks.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div xmlns="" class="refentry">
<a name="gnet-ipv6"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">IPv6</span></h2>
<p>IPv6 — IPv6 policy functions</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;gnet.h&gt;


enum                <a class="link" href="gnet-ipv6.html#GIPv6Policy">GIPv6Policy</a>;
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                <a class="link" href="gnet-ipv6.html#gnet-ipv6-set-policy">gnet_ipv6_set_policy</a>                (<a class="link" href="gnet-ipv6.html#GIPv6Policy">GIPv6Policy</a> policy);
<a class="link" href="gnet-ipv6.html#GIPv6Policy">GIPv6Policy</a>         <a class="link" href="gnet-ipv6.html#gnet-ipv6-get-policy">gnet_ipv6_get_policy</a>                (void);
</pre>
</div>
<div class="refsect1">
<a name="id-1.5.18.4"></a><h2>Description</h2>
<p>
The IPv6 module provides functions for setting and getting the "IPv6
policy".  The IPv6 policy affects domain name resolution and server
binding.  The possible policies are: IPv4 only, IPv6 only, IPv4 then
IPv6, and IPv6 then IPv4.  GNet attempts to set the policy when
<a class="link" href="gnet-gnet.html#gnet-init"><code class="function">gnet_init()</code></a> is called based on two environment variables (if set) or
on the host's interfaces.  This can be overridden by calling
<a class="link" href="gnet-ipv6.html#gnet-ipv6-set-policy"><code class="function">gnet_ipv6_set_policy()</code></a>.
</p>
<p>
IPv6 policy affects domain name resolution.  A domain name can be
resolved to several addresses.  Most programs will only use the first
address in the list.  The problem then is what order the addresses
should be in.  For example, if there are both IPv4 and IPv6 addresses
in the list and the system cannot connect to IPv6 hosts then an IPv6
address should not be first in the list.  Otherwise, the host will
attempt to connect to it and fail.  IPv6 policy determines the order
of the list.  If the policy is "IPv4 only", only IPv4 addresses will
be returned.  If the policy is "IPv6 then IPv4", IPv6 addresses will
come before IPv4 addresses in the list.
</p>
<p>
IPv6 policy also affects server binding.  When a server socket is
created, GNet binds to the "any" address by default.  There are IPv4
and IPv6 "any" addresses.  GNet needs to know which one to use.  If
the IPv6 policy allows IPv6, GNet will use the IPv6 "any" address.  If
the IPv6 policy allows only IPv4, GNet will use the IPv4 "any"
address.
</p>
<p>
GNet sets IPv6 policy in <a class="link" href="gnet-gnet.html#gnet-init"><code class="function">gnet_init()</code></a>.  First it checks two environment
variables: GNET_IPV6_POLICY and IPV6_POLICY.  If either is set, it
uses the value to set IPv6 policy.  Set the value to "4" for
<a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV4-ONLY:CAPS"><code class="literal">GIPV6_POLICY_IPV4_ONLY</code></a>, "6" for <a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV6-ONLY:CAPS"><code class="literal">GIPV6_POLICY_IPV6_ONLY</code></a>, "46" for
<a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV4-THEN-IPV6:CAPS"><code class="literal">GIPV6_POLICY_IPV4_THEN_IPV6</code></a>, or "64" for
<a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV6-THEN-IPV4:CAPS"><code class="literal">GIPV6_POLICY_IPV6_THEN_IPV4</code></a>.
</p>
<p>
If neither environment variable is set, GNet sets the policy based on
the host's interfaces.  If there are only IPv4 interfaces, the policy
is set to <a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV4-ONLY:CAPS"><code class="literal">GIPV6_POLICY_IPV4_ONLY</code></a>.  If there are only IPv6 interfaces,
the policy is set to <a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV6-ONLY:CAPS"><code class="literal">GIPV6_POLICY_IPV6_ONLY</code></a>.  If there are both, the
policy is set to <a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV4-THEN-IPV6:CAPS"><code class="literal">GIPV6_POLICY_IPV4_THEN_IPV6</code></a>.
</p>
<p>
At runtime on Windows, GNet will check to see the computer can support
IPv6. If so it will set the policy to <a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV4-THEN-IPV6:CAPS"><code class="literal">GIPV6_POLICY_IPV4_THEN_IPV6</code></a>. If
not it will set the policy to <a class="link" href="gnet-ipv6.html#GIPV6-POLICY-IPV4-ONLY:CAPS"><code class="literal">GIPV6_POLICY_IPV4_ONLY</code></a>. Environment 
variables are not checked on Windows.
</p>
</div>
<div class="refsect1">
<a name="id-1.5.18.5"></a><h2>Details</h2>
<div class="refsect2">
<a name="id-1.5.18.5.2"></a><h3>
<a name="GIPv6Policy"></a>enum GIPv6Policy</h3>
<pre class="programlisting">typedef enum {
  GIPV6_POLICY_IPV4_THEN_IPV6,
  GIPV6_POLICY_IPV6_THEN_IPV4,
  GIPV6_POLICY_IPV4_ONLY,
  GIPV6_POLICY_IPV6_ONLY
} GIPv6Policy;
</pre>
<p>
Policy for IPv6 use in GNet.  This affects domain name resolution
 and server binding.  <a class="link" href="gnet-gnet.html#gnet-init"><code class="function">gnet_init()</code></a> attempts to set a reasonable
 default based on environment variables or the interfaces available
 on the host.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><a name="GIPV6-POLICY-IPV4-THEN-IPV6:CAPS"></a><code class="literal">GIPV6_POLICY_IPV4_THEN_IPV6</code></span></p></td>
<td> Use IPv4, then IPv6
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GIPV6-POLICY-IPV6-THEN-IPV4:CAPS"></a><code class="literal">GIPV6_POLICY_IPV6_THEN_IPV4</code></span></p></td>
<td> Use IPv6, then IPv4
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GIPV6-POLICY-IPV4-ONLY:CAPS"></a><code class="literal">GIPV6_POLICY_IPV4_ONLY</code></span></p></td>
<td> Use IPv4 only
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GIPV6-POLICY-IPV6-ONLY:CAPS"></a><code class="literal">GIPV6_POLICY_IPV6_ONLY</code></span></p></td>
<td> Use IPv6 only
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.18.5.3"></a><h3>
<a name="gnet-ipv6-set-policy"></a>gnet_ipv6_set_policy ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                gnet_ipv6_set_policy                (<a class="link" href="gnet-ipv6.html#GIPv6Policy">GIPv6Policy</a> policy);</pre>
<p>
Sets the IPv6 policy.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>policy</code></em> :</span></p></td>
<td> IPv6 policy
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.18.5.4"></a><h3>
<a name="gnet-ipv6-get-policy"></a>gnet_ipv6_get_policy ()</h3>
<pre class="programlisting"><a class="link" href="gnet-ipv6.html#GIPv6Policy">GIPv6Policy</a>         gnet_ipv6_get_policy                (void);</pre>
<p>
Gets the IPv6 policy.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> IPv6 policy.
</td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="gnet-ipv6.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
