<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../../skin/gtkdoc.css" type="text/css"></link><link rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/lgo2010.css"></link><link rel="icon" type="image/png" href="../../skin/gnome-16.png"></link><link rel="SHORTCUT ICON" type="image/png" href="../../skin/gnome-16.png"></link><link rel="search" type="application/opensearchdescription+xml" href="../../gnome-library-search.xml" title="GNOME Library Search"></link><link rel="stylesheet" type="text/css" href="../../skin/jquery.autocomplete.css"></link><script type="text/javascript" src="../../js/jquery.js"></script><script type="text/javascript" src="../../js/jquery.autocomplete.js"></script><title>gupnp-binding-tool: GUPnP Reference Manual</title><link href="index.html" rel="home" title="GUPnP Reference Manual"></link><link href="api-tools.html" rel="up" title="Tools"></link><link href="api-tools.html" rel="prev" title="Tools"></link><link href="schemas.html" rel="next" title="Part III. XML Schemas"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/jquery.autocomplete.css"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/960_24_col.css"></link><script type="text/javascript" src="../../js/jquery.js"></script><script type="text/javascript" src="https://developer-old.gnome.org/js/jquery.jcarousel.min.js"></script><script type="text/javascript" src="../../js/jquery.autocomplete.js"></script></head><body><div id="accessibility_access"><ul><li><a href="gupnp-binding-tool.html#container">Go to page content</a></li><li><a href="gupnp-binding-tool.html#top_bar">Go to main menu</a></li><li><a href="gupnp-binding-tool.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/symbols/"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form><script type="text/javascript">
$('#s').autocomplete('/symbols/lookup/',
        { minChars:3, matchSubset:1, matchContains:1, cacheLength:10,
          selectOnly:1, rowsLimit:25 });
              </script></div></div></div><div class="clearfix"></div><div id="container" class="gtk-doc"><div class="content"><table cellpadding="2" cellspacing="5" class="navigation" id="top" summary="Navigation header" width="100%"><tbody><tr valign="middle">
<td align="left" class="shortcuts" width="100%"></td>
<td><a accesskey="h" href="index.html"><img alt="Home" border="0" height="16" src="home.png" width="16"></img></a></td>
<td><a accesskey="u" href="api-tools.html"><img alt="Up" border="0" height="16" src="up.png" width="16"></img></a></td>
<td><a accesskey="p" href="api-tools.html"><img alt="Prev" border="0" height="16" src="left.png" width="16"></img></a></td>
<td><a accesskey="n" href="schemas.html"><img alt="Next" border="0" height="16" src="right.png" width="16"></img></a></td>
</tr></tbody></table><div class="refentry">
<a name="gupnp-binding-tool"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tbody><tr>
<td valign="top">
<h2><span class="refentrytitle">gupnp-binding-tool</span></h2>
<p>gupnp-binding-tool — creates C convenience wrappers for UPnP services</p>
</td>
<td align="right" class="gallery_image" valign="top"></td>
</tr></tbody></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="cmdsynopsis"><p><code class="command">gupnp-binding-tool</code>  [--prefix {PREFIX}] [--mode {client|server}] {SCPD file}</p></div>
</div>
<div class="refsect1">
<a name="id-1.3.7.2.4"></a><h2>Description</h2>
<p>
      <span class="command"><strong>gupnp-binding-tool</strong></span> takes a <a class="glossterm" href="glossary.html#scpd"><em class="glossterm"></em></a><em class="glossterm"><a class="glossterm" href="glossary.html#scpd" title="Service Control Protocol Document">SCPD file</a></em> and generates convenience C functions
      which call the actual GUPnP functions. The client-side bindings can be seen
      as a service-specific version of the GUPnPServiceProxy API and the 
      service-side bindings are the same for GUPnPService.
    </p>
<p>
      These generated functions are less verbose and also safer as function call
      parameters are correctly typed. Action, variable and query names are easier
      to get correct with bindings (or at least the errors will be compile-time
      errors instead of run-time), and are also available in editor 
      autocompletion.
    </p>
</div>
<div class="refsect1">
<a name="id-1.3.7.2.5"></a><h2>Client side bindings</h2>
<p>
      As an example, this action:
    </p>
<pre class="programlisting">&lt;action&gt;
  &lt;name&gt;DeletePortMapping&lt;/name&gt;
  &lt;argumentList&gt;
    &lt;argument&gt;
      &lt;name&gt;NewRemoteHost&lt;/name&gt;
      &lt;direction&gt;in&lt;/direction&gt;
      &lt;relatedStateVariable&gt;RemoteHost&lt;/relatedStateVariable&gt;
    &lt;/argument&gt;
    &lt;argument&gt;
      &lt;name&gt;NewExternalPort&lt;/name&gt;
      &lt;direction&gt;in&lt;/direction&gt;
      &lt;relatedStateVariable&gt;ExternalPort&lt;/relatedStateVariable&gt;
    &lt;/argument&gt;
    &lt;argument&gt;
      &lt;name&gt;NewProtocol&lt;/name&gt;
      &lt;direction&gt;in&lt;/direction&gt;
      &lt;relatedStateVariable&gt;PortMappingProtocol&lt;/relatedStateVariable&gt;
    &lt;/argument&gt;
  &lt;/argumentList&gt;
&lt;/action&gt;</pre>
<p>
      Will generate the following synchronous client-side (control point) 
      function:
    </p>
<pre class="programlisting">static inline gboolean
igd_delete_port_mapping (GUPnPServiceProxy *proxy,
                         const gchar *in_new_remote_host,
                         const guint in_new_external_port,
                         const gchar *in_new_protocol,
                         GError **error);
</pre>
<p>
      As can be seen, the arguments have the correct types and are prefixed with
      the argument direction. 
    </p>
<p>
      <span class="command"><strong>gupnp-binding-tool</strong></span> generates both synchronous and
      asynchronous wrappers.  The <code class="function">igd_delete_port_mapping</code> example
      above is the synchronous form, the asynchronous form is as follows:
    </p>
<pre class="programlisting">typedef void (*igd_delete_port_mapping_reply) (GUPnPServiceProxy *proxy,
                                               GError *error,
                                               gpointer userdata);

static inline GUPnPServiceProxyAction *
igd_delete_port_mapping_async (GUPnPServiceProxy *proxy,
                               const gchar *in_new_remote_host,
                               const guint in_new_external_port,
                               const gchar *in_new_protocol,
                               igd_delete_port_mapping_reply callback,
                               gpointer userdata);</pre>
<p>
      The asynchronous form (implemented using
      <code class="function">gupnp_service_proxy_begin_action()</code> and
      <code class="function">gupnp_service_proxy_end_action()</code>) will return without
      blocking and later invoke the callback from the main loop when the reply
      is received.
    </p>
<p>
      The tool also creates bindings for state variable notifications. This state 
      variable definition:
    </p>
<pre class="programlisting">&lt;stateVariable sendEvents="yes"&gt;
  &lt;name&gt;ExternalIPAddress&lt;/name&gt;
  &lt;dataType&gt;string&lt;/dataType&gt;
&lt;/stateVariable&gt;</pre>
<p>
      will create this client binding that can be used to get notifications on 
      "ExternalIPAddress" changes:
    </p>
<pre class="programlisting">typedef void
(*igd_external_ip_address_changed_callback) (GUPnPServiceProxy *proxy,
                                             const gchar *external_ip_address,
                                             gpointer userdata);

static inline gboolean
igd_external_ip_address_add_notify (GUPnPServiceProxy *proxy,
                                    igd_external_ip_address_changed_callback callback,
                                    gpointer userdata);</pre>
<p>
      All of the examples were produced with <code class="filename">gupnp-binding-tool 
      --prefix igd --mode client WANIPConnection.xml</code>.
    </p>
</div>
<div class="refsect1">
<a name="id-1.3.7.2.6"></a><h2>Server side bindings</h2>
<p>
      The corresponding server bindings for the same UPnP action 
      (DeletePortMapping) look like this:
    </p>
<pre class="programlisting">void
igd_delete_port_mapping_action_get (GUPnPServiceAction *action,
                                    gchar **in_new_remote_host,
                                    guint *in_new_external_port,
                                    gchar **in_new_protocol);

gulong
igd_delete_port_mapping_action_connect (GUPnPService *service,
                                        GCallback callback,
                                        gpointer userdata);</pre>
<p>
      The generated *_action_connect() function can be used to connect the action
      handler. The *_action_get() and *_action_set() functions can then 
      be used inside the action handler to get/set action variables. If notified
      variables are modified, the *_variable_notify() should be used to send 
      the notifications (see below).  
    </p>
<pre class="programlisting">typedef gchar *(*igd_external_ip_address_query_callback) (GUPnPService *service,
                                                          gpointer userdata);

gulong
igd_external_ip_address_query_connect (GUPnPService *service,
                                       igd_external_ip_address_query_callback callback,
                                       gpointer userdata);
void
igd_external_ip_address_variable_notify (GUPnPService *service,
                                         const gchar *external_ip_address);</pre>
<p>
      The *_query_connect() function can be used to connect the service-specific 
      query handler. The return value of the handler is the returned state 
      variable value.
    </p>
<p>
      All of the examples were produced with <code class="filename">gupnp-binding-tool 
      --prefix igd --mode server WANIPConnection.xml</code>.
    </p>
</div>
</div><div class="footer">
<hr></hr>Generated by GTK-Doc V1.25</div></div><div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="gupnp-binding-tool.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
