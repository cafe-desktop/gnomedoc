<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/lgo2010.css"></link><link rel="icon" type="image/png" href="../skin/gnome-16.png"></link><link rel="SHORTCUT ICON" type="image/png" href="../skin/gnome-16.png"></link><link rel="search" type="application/opensearchdescription+xml" href="../gnome-library-search.xml" title="GNOME Library Search"></link><link rel="stylesheet" href="../skin/moinmoin.css" type="text/css"></link><title>HowDoI/GAction - GNOME Wiki!</title><link href="https://wiki.gnome.org/action/rss_rc/HowDoI/GAction?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=HowDoI%2FGAction&amp;ddiffs=1" rel="alternate" title="GNOME Wiki!: HowDoI/GAction" type="application/rss+xml"></link><link href="https://wiki.gnome.org/Home" rel="Start"></link><link href="https://wiki.gnome.org/action/raw/HowDoI/GAction?action=raw" rel="Alternate" title="Wiki Markup"></link><link href="https://wiki.gnome.org/action/print/HowDoI/GAction?action=print" media="print" rel="Alternate" title="Print View"></link><link href="https://wiki.gnome.org/HowDoI" rel="Up"></link><link href="https://wiki.gnome.org/FindPage" rel="Search"></link><link href="https://wiki.gnome.org/TitleIndex" rel="Index"></link><link href="https://wiki.gnome.org/WordIndex" rel="Glossary"></link><link href="https://wiki.gnome.org/HelpOnFormatting" rel="Help"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/jquery.autocomplete.css"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/960_24_col.css"></link><script type="text/javascript" src="../js/jquery.js"></script><script type="text/javascript" src="https://developer-old.gnome.org/js/jquery.jcarousel.min.js"></script><script type="text/javascript" src="../js/jquery.autocomplete.js"></script></head><body><div id="accessibility_access"><ul><li><a href="index.html#container">Go to page content</a></li><li><a href="index.html#top_bar">Go to main menu</a></li><li><a href="index.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/search"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form></div></div></div><div class="clearfix"></div><div id="container" class="content-id"><div class="content"><div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
</p><h1 id="GAction">GAction</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line874">A GAction is a representation of a single user-interesting action in an application. <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span></p><p class="line862">To use GAction you should be using GtkApplication.  See <a href="https://wiki.gnome.org/HowDoI/GtkApplication">HowDoI/GtkApplication</a>. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p><p class="line862">It's possible to use GAction without GtkApplication but this is not discussed here.  This page is about using GAction within your GtkApplication. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line867">
</p><h2 id="What_it_is.2C_what_it_isn.27t">What it is, what it isn't</h2>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line874">A GAction is essentially a way to tell the toolkit about a piece of functionality in your program, and to give it a name. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span></p><p class="line874">Actions are purely functional.  They do not contain any presentational information. <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span></p><p class="line874">An action has four pieces of information associated with it: <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span></p><ul><li><p class="line862">a <strong>name</strong> as an identifier (usually all-lowercase, untranslated English string) <span class="anchor" id="line-18"></span></p></li><li><p class="line862">an <strong>enabled</strong> flag indicating if the action can be activated or not (like "sensitive") <span class="anchor" id="line-19"></span></p></li><li><p class="line862">an optional <strong>state</strong> value, for stateful actions (like a boolean for toggles) <span class="anchor" id="line-20"></span></p></li><li><p class="line862">an optional <strong>parameter type</strong>, used when activating the action <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span></p></li></ul><p class="line874">An action supports two operations: <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span></p><ul><li><p class="line891"><strong>activation</strong>, invoked with an optional parameter (of the correct type, see above) <span class="anchor" id="line-25"></span></p></li><li><p class="line891"><strong>state change</strong> request, invoked with a new requested state value (of the correct type).  Only supported for stateful actions. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p></li></ul><p class="line874">Here are some rules about an action: <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span></p><ul><li><p class="line862">the <strong>name</strong> is immutable (in the sense that it will never change) and it is never <tt class="backtick">NULL</tt> <span class="anchor" id="line-30"></span></p></li><li><p class="line862">the <strong>enabled</strong> flag can change <span class="anchor" id="line-31"></span></p></li><li><p class="line862">the <strong>parameter type</strong> is immutable <span class="anchor" id="line-32"></span></p></li><li>the parameter type is optional: it can be NULL <span class="anchor" id="line-33"></span></li><li><p class="line862">if the parameter type is <tt class="backtick">NULL</tt> then action <strong>activation</strong> must be done without a parameter (ie: a <tt class="backtick">NULL</tt> <tt class="backtick">GVariant</tt> pointer) <span class="anchor" id="line-34"></span></p></li><li><p class="line862">if the parameter type is non-<tt class="backtick">NULL</tt> then the parameter must have this type <span class="anchor" id="line-35"></span></p></li><li><p class="line862">the <strong>state</strong> can change, but it cannot change type <span class="anchor" id="line-36"></span></p></li><li>if the action was stateful when it was created, it will always have a state and it will always have exactly the same type (such as boolean or string) <span class="anchor" id="line-37"></span></li><li>if the action was stateless when it was created, it can never have a state <span class="anchor" id="line-38"></span></li><li><p class="line862">you can only request <strong>state changes</strong> on stateful actions and it is only possible to request that the state change to a value of the same type as the existing state <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span></p></li></ul><p class="line862">An action does <em>not</em> have any of the following: <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></p><ul><li>a label <span class="anchor" id="line-43"></span></li><li>an icon <span class="anchor" id="line-44"></span></li><li>a way of creating a widget corresponding to it <span class="anchor" id="line-45"></span></li><li>any other sort of presentational information <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></li></ul><p class="line867">
</p><h2 id="Action_state_and_parameters">Action state and parameters</h2>
<span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><p class="line874">Most actions in your application will be stateless actions with no parameters.  These typically appear as menu items with no special decoration.  An example is "quit". <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span></p><p class="line862">Stateful actions are used to represent an action which has a closely-associated state of some kind.  A good example is a "fullscreen" action.  For this case, you'd expect to see a checkmark next to the menu item when the fullscreen option is active.  This is usually called a <strong>toggle action</strong>, and it has a boolean state.  By convention, toggle actions have no parameter type for activation: activating the action always toggles the state. <span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span></p><p class="line862">Another common case is to have an action representing a enumeration of possible values of a given type (typically string).  This is often called a <strong>radio action</strong> and is usually represented in the user interface with radio buttons or radio menu items, or sometimes a combobox.  A good example is "text-justify" with possible values "left", "center", and "right".  By convention, these types of actions have a parameter type equal to their state type, and activating them with a particular parameter value is equivalent to changing their state to that value. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></p><p class="line862">This approach to handling radio buttons is different than many other action systems such as <a class="nonexistent" href="https://wiki.gnome.org/GtkAction">GtkAction</a>.  With GAction, there is only one action for "text-justify" and "left", "center" and "right" are possible states on that action.  There are not three separate "justify-left", "justify-center" and "justify-right" actions. <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span></p><p class="line874">The final common type of action is a stateless action with a parameter.  This is typically used for actions like "open-bookmark" where the parameter to the action would be the identifier of the bookmark to open. <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span></p><p class="line867">
</p><h2 id="Action_target_and_detailed_names">Action target and detailed names</h2>
<span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><p class="line862">Because some types of actions cannot be invoked without a parameter, it is often important to specify a parameter when referring to the action from a place where it will be invoked (such as from a radio button that sets the state to a particular value or from a menu item that opens a specific bookmark).  From these contexts, the value used for the action parameter is typically called the <strong>target</strong> of the action. <span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span></p><p class="line874">Even though toggle actions have a state, they do not have a parameter.  Therefore, a target value is not needed when referring to them -- they will always be toggled on activation. <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span></p><p class="line862">Most APIs that allow using a <tt class="backtick">GAction</tt> (such as GMenuModel and GtkActionable) allow use of <strong>detailed action names</strong>.  This is a convenient way of specifying an action name and an action target with a single string. <span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span></p><p class="line862">In the case that the action target is a string with no unusual characters (ie: only alpha-numeric, plus '-' and '.') then you can use a detailed action name of the form "justify::left" to specify the <tt class="backtick">justify</tt> action with a target of <tt class="backtick">left</tt>. <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span></p><p class="line862">In the case that the action target is not a string, or contains unusual characters, you can use the more general format "<tt class="backtick">action-name(5)</tt>", where the "<tt class="backtick">5</tt>" here is any valid text-format GVariant (ie: a string that can be parsed by <tt class="backtick">g_variant_parse()</tt>).  Another example is "<tt class="backtick">open-bookmark('http://gnome.org/')</tt>". <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></p><p class="line862">You can convert between detailed action names and split-out action names and target values using <tt class="backtick">g_action_parse_detailed_action_name()</tt> and <tt class="backtick">g_action_print_detailed_action_name()</tt> but usually you will not need to.  Most APIs will provide both ways of specifying actions with targets. <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span></p><p class="line867">
</p><h2 id="Action_scopes">Action scopes</h2>
<span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line874">Actions are always scoped to a particular object on which they operate. <span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span></p><p class="line874">The two things that it's possible to scope an action to with GTK+ are applications and windows. <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span></p><p class="line874">Actions scoped to windows should be the actions that specifically impact that window. These are actions like "fullscreen" and "close", or in the case that a window contains a document, "save" and "print". <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span></p><p class="line874">Actions that impact the application as a whole rather than one specific window are scoped to the application.  These are actions like "about" and "preferences". <span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span></p><p class="line874">If a particular action is scoped to a window then it is scoped to a specific window.  Another way of saying this: if your application has a "fullscreen" action that applies to windows and it has three windows, then it will have three fullscreen actions: one for each window. <span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span></p><p class="line874">Having a separate action per-window allows for each window to have a separate state for each instance of the action as well as being able to control the enabled state of the action on a per-window basis. <span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span></p><p class="line874">Actions are added to their relevant scope (application or window) using the GActionMap interface. <span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></p><p class="line867">
</p><h2 id="GActionMap">GActionMap</h2>
<span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><p class="line862">GActionMap is an interface exposing a mapping of action names to actions.  It is implemented by GtkApplication and GtkApplicationWindow.  Actions can be added, removed, or looked up. <span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span></p><p class="line867"><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-1-1"></span></p><div class="highlight c"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-0f18b58ce6d71ae61c619620576698701d086f8f" lang="en"><span class="line"><span class="anchor" id="line-1-2"></span><span class="ResWord">void</span>                <span class="ID">g_action_map_add_action</span>             (<span class="ID">GActionMap</span>  *<span class="ID">action_map</span>,</span>
<span class="line"><span class="anchor" id="line-2-1"></span>                                                         <span class="ID">GAction</span>     *<span class="ID">action</span>);</span>
<span class="line"><span class="anchor" id="line-3-1"></span><span class="ResWord">void</span>                <span class="ID">g_action_map_remove_action</span>          (<span class="ID">GActionMap</span>  *<span class="ID">action_map</span>,</span>
<span class="line"><span class="anchor" id="line-4-1"></span>                                                         <span class="ResWord">const</span> <span class="ID">gchar</span> *<span class="ID">action_name</span>);</span>
<span class="line"><span class="anchor" id="line-5-1"></span><span class="ID">GAction</span> *           <span class="ID">g_action_map_lookup_action</span>          (<span class="ID">GActionMap</span>  *<span class="ID">action_map</span>,</span>
<span class="line"><span class="anchor" id="line-6-1"></span>                                                         <span class="ResWord">const</span> <span class="ID">gchar</span> *<span class="ID">action_name</span>);</span>
</pre></div></div><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><p class="line874">If you want to insert several actions at the same time, it is typically faster and easier to use GActionEntry. <span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span></p><p class="line862">When referring to actions on a GActionMap only the name of the action itself is used (ie: "quit", not "app.quit").  The "app.quit" form is only used when referring to actions from places like a GMenu or GtkActionable widget where the scope of the action is not already known.  Because you're using the GtkApplication or GtkApplicationWindow as the GActionMap it is clear which object your action is scoped to, so the prefix is not needed. <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span></p><p class="line867">
</p><h2 id="GSimpleAction_vs._GAction">GSimpleAction vs. GAction</h2>
<span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><p class="line874">GAction is an interface with several implementations.  The one that you are most likely to use directly is GSimpleAction. <span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span></p><p class="line874">A good way to think about the split between GAction and GSimpleAction is that GAction is the "consumer interface" and GSimpleAction is the provider interface.  The GAction interface provides the functions that are consumed by users/callers/displayers of the action (such as menus and widgets).  The GSimpleAction interface is only accessed by the code that provides the implementation for the action itself. <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span></p><p class="line874">Note that GActionMap takes a GAction.  Your action will only be "consumed" as a result of you putting it in a GActionMap. <span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span></p><p class="line874">Compare: <span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span></p><ul><li><p class="line862">GAction has a function for checking if an action is enabled (<tt class="backtick">g_action_get_enabled()</tt>) but only the GSimpleAction API can enable or disable an action (<tt class="backtick">g_simple_action_set_enabled()</tt>). <span class="anchor" id="line-117"></span></p></li><li><p class="line862">GAction has a function to query the state of the action (<tt class="backtick">g_action_get_state()</tt>) and <strong>request</strong> changes to it (<tt class="backtick">g_action_change_state()</tt>) but only GSimpleAction has the API to directly set the state value (<tt class="backtick">g_simple_action_set_state()</tt>). <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span></p></li></ul><p class="line874">If you want to provide a custom GAction implementation then you can have your own mechanism to control access to state setting and enabled.  The GSettings GAction implementation, for example, gets its state directly from the value in GSettings and is enabled according to lockdown in effect on the key.  It is not possible to directly modify these values in any way (although it is possible to indirectly affect the state by changing the value of the setting, if you have permission to do so). <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span></p><p class="line867">
</p><h2 id="Using_GSimpleAction">Using GSimpleAction</h2>
<span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><p class="line874">If you are implementing actions, probably you will do it with GSimpleAction. <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span></p><p class="line862">GSimpleAction has two interesting signals: <tt class="backtick">activate</tt> and <tt class="backtick">change-state</tt>.  These correspond directly to <tt class="backtick">g_action_activate()</tt> and <tt class="backtick">g_action_change_state()</tt>.  You will almost certainly need to connect a handler to the <tt class="backtick">activate</tt> signal in order to handle the action being activated.  The signal handler takes a <tt class="backtick">GVariant</tt> parameter which is the parameter that was passed to <tt class="backtick">g_action_activate()</tt>. <span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span></p><p class="line862">If your action is stateful, you may also want to connect a <tt class="backtick">change-state</tt> handler to deal with state change requests.  If your action is stateful and you do not connect a handler for the <tt class="backtick">change-state</tt> signal then the default is that all state change requests will always change the state to the requested value.  Even if you always want the state to be set to the requested value, you will probably want to connect a handler so that you can take some action in response to the state being changed. <span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span></p><p class="line862">The default behaviour of setting the state in response to <tt class="backtick">g_action_change_state()</tt> is disabled when connecting a handler to <tt class="backtick">change-state</tt>.  You therefore need to be sure to call <tt class="backtick">g_simple_action_set_state()</tt> from your handler if you actually want the state to change. <span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span></p><p class="line874">A convenient way to bulk-create all the GSimpleActions you need to add to a GActionMap is to use a GActionEntry array and `g_action_map_add_action_entries()'. <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span></p><p class="line867"><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-1-3"></span></p><div class="highlight c"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-17cf6c19466f786b7a89aa60d4ef7baf411d12cf" lang="en"><span class="line"><span class="anchor" id="line-1-4"></span><span class="ResWord">static</span> <span class="ID">GActionEntry</span> <span class="ID">app_entries</span>[] =</span>
<span class="line"><span class="anchor" id="line-2-2"></span>{</span>
<span class="line"><span class="anchor" id="line-3-2"></span>  { <span class="String">"</span><span class="String">preferences</span><span class="String">"</span>, <span class="ID">preferences_activated</span>, <span class="ResWord">NULL</span>, <span class="ResWord">NULL</span>, <span class="ResWord">NULL</span> },</span>
<span class="line"><span class="anchor" id="line-4-2"></span>  { <span class="String">"</span><span class="String">quit</span><span class="String">"</span>, <span class="ID">quit_activated</span>, <span class="ResWord">NULL</span>, <span class="ResWord">NULL</span>, <span class="ResWord">NULL</span> }</span>
<span class="line"><span class="anchor" id="line-5-2"></span>};</span>
<span class="line"><span class="anchor" id="line-6-2"></span></span>
<span class="line"><span class="anchor" id="line-7-1"></span><span class="ResWord">static</span> <span class="ResWord">void</span></span>
<span class="line"><span class="anchor" id="line-8-1"></span><span class="ID">example_app_startup</span> (<span class="ID">GApplication</span> *<span class="ID">app</span>)</span>
<span class="line"><span class="anchor" id="line-9-1"></span>{</span>
<span class="line"><span class="anchor" id="line-10-1"></span>  ...</span>
<span class="line"><span class="anchor" id="line-11-1"></span>  <span class="ID">g_action_map_add_action_entries</span> (<span class="ID">G_ACTION_MAP</span> (<span class="ID">app</span>),</span>
<span class="line"><span class="anchor" id="line-12-1"></span>                                   <span class="ID">app_entries</span>, <span class="ID">G_N_ELEMENTS</span> (<span class="ID">app_entries</span>),</span>
<span class="line"><span class="anchor" id="line-13-1"></span>                                   <span class="ID">app</span>);</span>
<span class="line"><span class="anchor" id="line-14-1"></span>  ...</span>
<span class="line"><span class="anchor" id="line-15-1"></span>}</span>
</pre></div></div><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><p class="line867">
</p><h2 id="Other_kinds_of_actions">Other kinds of actions</h2>
<span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><p class="line874">Besides GSimpleAction, GIO provides some other implementations of GAction. One is GSettingsAction, which wraps a GSettings key with an action <span class="anchor" id="line-154"></span>that represents the value of the setting and lets you set the key to a new value when activated. Another is GPropertyAction, which similarly  <span class="anchor" id="line-155"></span>wraps a GObject property. <span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span></p><p class="line874">Both GSettingsAction and GPropertyAction implement toggle-on-activate behaviour for boolean states - note that GSimpleAction does not, you have <span class="anchor" id="line-158"></span>to implement an <tt class="backtick">activate</tt> handler yourself for that. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span></p><p class="line867">
</p><h2 id="Adding_actions_to_your_GtkApplication">Adding actions to your GtkApplication</h2>
<span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><p class="line862">You can add a GAction to anything implementing the GActionMap interface, including GtkApplication.  This is done with <tt class="backtick">g_action_map_add_action()</tt>. For GSimpleActions, you can also use <tt class="backtick">g_action_map_add_action_entries()</tt>. <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span></p><p class="line862">Typically, you will want to do this during the <tt class="backtick">startup</tt> phase of your application.  See <a href="https://wiki.gnome.org/HowDoI/GtkApplication">HowDoI/GtkApplication</a> for more information on that. <span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span></p><p class="line862">It's possible to add or remove actions at any time, but doing it before <tt class="backtick">startup</tt> is wasteful in case the application is a remote instance (and will just exit anyway).  It is also possible to dynamically add and remove actions any time after <tt class="backtick">startup</tt>, when the application is running. <span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span></p><p class="line867">
</p><h2 id="Adding_actions_to_your_GtkApplicationWindow">Adding actions to your GtkApplicationWindow</h2>
<span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><p class="line867">GtkApplicationWindow also implements GActionMap.  You will typically want to add most actions to your window when it is constructed.  It is possible to add and remove actions at any time while the window exists. <span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span></p><p class="line874">For example: <span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-1-5"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="index.html#" onclick="return togglenumber(\'CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74" lang="en"><span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_1">   1</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_1"></span><span class="anchor" id="line-1-6"></span><span class="ResWord">from</span> <span class="ID">gi</span><span class="ID">.</span><span class="ID">repository</span> <span class="ResWord">import</span> <span class="ID">Gio</span>, <span class="ID">Gtk</span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_2">   2</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_2"></span><span class="anchor" id="line-2-3"></span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_3">   3</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_3"></span><span class="anchor" id="line-3-3"></span><span class="ResWord">def</span> <span class="ID">saveCb</span>(<span class="ID">action</span>, <span class="ID">param</span>):</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_4">   4</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_4"></span><span class="anchor" id="line-4-3"></span>    <span class="ResWord">print</span> <span class="String">"</span><span class="String">You are welcome</span><span class="String">"</span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_5">   5</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_5"></span><span class="anchor" id="line-5-3"></span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_6">   6</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_6"></span><span class="anchor" id="line-6-3"></span><span class="ResWord">def</span> <span class="ID">activateCb</span>(<span class="ID">app</span>):</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_7">   7</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_7"></span><span class="anchor" id="line-7-2"></span>    <span class="ID">window</span> = <span class="ID">Gtk</span>.<span class="ID">ApplicationWindow</span>()</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_8">   8</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_8"></span><span class="anchor" id="line-8-2"></span>    <span class="ID">app</span>.<span class="ID">add_window</span>(<span class="ID">window</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_9">   9</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_9"></span><span class="anchor" id="line-9-2"></span>    <span class="ID">window</span>.<span class="ID">show</span>()</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_10">  10</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_10"></span><span class="anchor" id="line-10-2"></span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_11">  11</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_11"></span><span class="anchor" id="line-11-2"></span>    <span class="ID">action</span> = <span class="ID">Gio</span>.<span class="ID">SimpleAction</span>.<span class="ID">new</span>(<span class="String">"</span><span class="String">save</span><span class="String">"</span>, <span class="ConsWord">None</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_12">  12</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_12"></span><span class="anchor" id="line-12-2"></span>    <span class="ID">action</span>.<span class="ID">connect</span>(<span class="String">"</span><span class="String">activate</span><span class="String">"</span>, <span class="ID">saveCb</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_13">  13</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_13"></span><span class="anchor" id="line-13-2"></span>    <span class="ID">window</span>.<span class="ID">add_action</span>(<span class="ID">action</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_14">  14</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_14"></span><span class="anchor" id="line-14-2"></span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_15">  15</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_15"></span><span class="anchor" id="line-15-2"></span>    <span class="ID">button</span> = <span class="ID">Gtk</span>.<span class="ID">Button</span>.<span class="ID">new</span>()</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_16">  16</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_16"></span><span class="anchor" id="line-16-1"></span>    <span class="ID">button</span>.<span class="ID">set_label</span>(<span class="String">"</span><span class="String">Save</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_17">  17</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_17"></span><span class="anchor" id="line-17-1"></span>    <span class="ID">button</span>.<span class="ID">show</span>()</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_18">  18</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_18"></span><span class="anchor" id="line-18-1"></span>    <span class="ID">window</span>.<span class="ID">add</span>(<span class="ID">button</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_19">  19</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_19"></span><span class="anchor" id="line-19-1"></span>    <span class="ID">button</span>.<span class="ID">set_action_name</span>(<span class="String">"</span><span class="String">win.save</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_20">  20</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_20"></span><span class="anchor" id="line-20-1"></span></span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_21">  21</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_21"></span><span class="anchor" id="line-21-1"></span><span class="ID">app</span> = <span class="ID">Gtk</span>.<span class="ID">Application</span>()</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_22">  22</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_22"></span><span class="anchor" id="line-22-1"></span><span class="ID">app</span>.<span class="ID">connect</span>(<span class="String">"</span><span class="String">activate</span><span class="String">"</span>, <span class="ID">activateCb</span>)</span>
<span class="line"><span class="LineNumber"><a href="index.html#CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_23">  23</a> </span><span class="LineAnchor" id="CA-525ce9a5153f923e759b0fd4abfb77c2dd417c74_23"></span><span class="anchor" id="line-23-1"></span><span class="ID">app</span>.<span class="ID">run</span>([])</span>
</pre></div></div><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><p class="line867">
</p><h2 id="Accelerators_.28keybindings.29_for_actions">Accelerators (keybindings) for actions</h2>
<span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><p class="line862">Use <tt class="backtick">gtk_application_add_accelerator</tt> inside your application's <tt class="backtick">startup</tt> implementation.  For example: <span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span></p><p class="line867"><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-1-7"></span></p><div class="highlight c"><div class="codearea" dir="ltr" lang="en"><pre dir="ltr" id="CA-6bd525a2f78415c190572fa11d437577a86c7d26" lang="en"><span class="line"><span class="anchor" id="line-1-8"></span>   <span class="ResWord">const</span> <span class="ResWord">char</span> *<span class="ID">accels</span>[] = {<span class="String">"</span><span class="String">&lt;Contol&gt;&lt;Shift&gt;T</span><span class="String">"</span>, <span class="ResWord">NULL</span>};</span>
<span class="line"><span class="anchor" id="line-2-4"></span>   <span class="ID">gtk_application_set_accels_for_action</span> (<span class="ID">app</span>, <span class="String">"</span><span class="String">win.new_tab</span><span class="String">"</span>, <span class="ID">accels</span>);</span>
</pre></div></div><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><p class="line867">
</p><h2 id="What_can_be_done_with_actions">What can be done with actions</h2>
<span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><p class="line874">GActions that you add to your application or window can be used in several different ways. <span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span></p><ul><li>used with GMenu <span class="anchor" id="line-214"></span></li><li><p class="line862">used with GtkActionable widgets <span class="anchor" id="line-215"></span></p></li><li>remotely activated from a remote GApplication instance (only for application actions) <span class="anchor" id="line-216"></span></li><li>listed as "Additional application actions" in desktop files (only for application actions) <span class="anchor" id="line-217"></span></li><li>remotely activated from other D-Bus callers (such as Ubuntu's HUD) <span class="anchor" id="line-218"></span></li><li>used with GNotification notifications (only for application actions, available since GLib 2.39) <span class="anchor" id="line-219"></span></li></ul><span class="anchor" id="bottom"></span></div></div><div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="index.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
