<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/lgo2010.css"></link><link rel="icon" type="image/png" href="../skin/gnome-16.png"></link><link rel="SHORTCUT ICON" type="image/png" href="../skin/gnome-16.png"></link><link rel="search" type="application/opensearchdescription+xml" href="../gnome-library-search.xml" title="GNOME Library Search"></link><link rel="stylesheet" href="../skin/moinmoin.css" type="text/css"></link><title>HowDoI/Jhbuild - GNOME Wiki!</title><link href="https://wiki.gnome.org/action/rss_rc/HowDoI/Jhbuild?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=HowDoI%2FJhbuild&amp;ddiffs=1" rel="alternate" title="GNOME Wiki!: HowDoI/Jhbuild" type="application/rss+xml"></link><link href="https://wiki.gnome.org/Home" rel="Start"></link><link href="https://wiki.gnome.org/action/raw/HowDoI/Jhbuild?action=raw" rel="Alternate" title="Wiki Markup"></link><link href="https://wiki.gnome.org/action/print/HowDoI/Jhbuild?action=print" media="print" rel="Alternate" title="Print View"></link><link href="https://wiki.gnome.org/HowDoI" rel="Up"></link><link href="https://wiki.gnome.org/FindPage" rel="Search"></link><link href="https://wiki.gnome.org/TitleIndex" rel="Index"></link><link href="https://wiki.gnome.org/WordIndex" rel="Glossary"></link><link href="https://wiki.gnome.org/HelpOnFormatting" rel="Help"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/jquery.autocomplete.css"></link><link rel="stylesheet" type="text/css" media="all" href="../skin/960_24_col.css"></link><script type="text/javascript" src="../js/jquery.js"></script><script type="text/javascript" src="https://developer-old.gnome.org/js/jquery.jcarousel.min.js"></script><script type="text/javascript" src="../js/jquery.autocomplete.js"></script></head><body><div id="accessibility_access"><ul><li><a href="index.html#container">Go to page content</a></li><li><a href="index.html#top_bar">Go to main menu</a></li><li><a href="index.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/search"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form></div></div></div><div class="clearfix"></div><div id="container" class="content-id"><div class="content"><div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
</p><h1 id="Jhbuild">Jhbuild</h1>
<span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">JHBuild is the recommended way to build and run GNOME development code. It will download the code, configure and build it for you, in a way that does not interfere with or modify your existing system. JHBuild will also figure out which dependencies are required from your distribution, and it will build any development software that is needed. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p><p class="line862">This guide contains for an recommended JHBuild setup, which is different from the one recommended in the <a class="https" href="https://developer.gnome.org/jhbuild/unstable/">JHBuild documentation</a>. When setting up JHBuild you should not mix different guides - they may not be compatible. However, the official JHBuild manual might be useful for learning <a class="https" href="https://developer.gnome.org/jhbuild/unstable/command-reference.html.en">command line</a> and <a class="https" href="https://developer.gnome.org/jhbuild/unstable/config-reference.html.en">configuration file</a> options. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line867"><span class="anchor" id="line-10"></span></p><p class="line867"><span class="anchor" id="line-11"></span></p><p class="line867"><span class="anchor" id="line-12"></span></p><p class="line867"><span class="anchor" id="line-13"></span></p><div><table><tbody><tr>  <td style="background-color: #E0E0FF;"><p class="line891"><strong>New to GNOME?</strong> This page is for experienced GNOME contributors who want to learn more about JHBuild. If you're a newcomer, do not read or follow the instructions on this page. Read the <a href="https://wiki.gnome.org/Projects/Jhbuild/Introduction">JHBuild Introduction</a> instead.</p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="index.html#Jhbuild">Jhbuild</a><ol><li>
<a href="index.html#Introduction">Introduction</a></li><li>
<a href="index.html#Remove_existing_jhbuild_install">Remove existing jhbuild install</a></li><li>
<a href="index.html#Understanding_the_directory_layout">Understanding the directory layout</a></li><li>
<a href="index.html#Files_that_comprise_jhbuild_itself">Files that comprise jhbuild itself</a><ol><li>
<a href="index.html#Files_created_by_jhbuilding">Files created by jhbuilding</a></li></ol></li><li>
<a href="index.html#Download_and_install_jhbuild">Download and install jhbuild</a></li><li>
<a href="index.html#Ensure_.2BAH4-.2F.local.2Fbin_or_.2BAH4-.2Fbin.2F_exists_and_is_in_your_PATH">Ensure ~/.local/bin or ~/bin/ exists and is in your PATH</a></li><li>
<a href="index.html#A.2BAH4-.2F.config.2Fjhbuildrc">~/.config/jhbuildrc</a></li><li>
<a href="index.html#System_dependencies">System dependencies</a></li><li>
<a href="index.html#Using_jhbuild">Using jhbuild</a></li><li>
<a href="index.html#Updating_a_build">Updating a build</a></li><li>
<a href="index.html#If_things_go_wrong">If things go wrong</a><ol><li>
<a href="index.html#A-bash:_jhbuild:_Command_not_found">-bash: jhbuild: Command not found</a></li><li>
<a href="index.html#I_am_getting_errors_about_.2Fopt.2Fgnome">I am getting errors about /opt/gnome</a></li><li>
<a href="index.html#Errors_about_missing_dependencies">Errors about missing dependencies</a></li><li>
<a href="index.html#I_am_having_another_problem_building_a_particular_module">I am having another problem building a particular module</a></li></ol></li></ol></li></ol></div> <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line867">
</p><h2 id="Introduction">Introduction</h2>
<span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line862">A general knowledge of basic UNIX commands is assumed.  Specifically, you should understand that <tt class="backtick">~/x</tt> means "a file or directory named '<tt class="backtick">x</tt>' inside of your home directory".  You should also be comfortable with commands like <tt class="backtick">cd</tt>, <tt class="backtick">mkdir</tt>, <tt class="backtick">rm</tt>, etc.  You should also know how to edit text files in specific locations. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p><p class="line862">This document uses the convention that when a directory name is written it will always be suffixed with a trailing slash (like <tt class="backtick">~/jhbuild/</tt>).  When the name of a regular file is written, there will be no slash (like <tt class="backtick">~/.config/jhbuildrc</tt>).  This convention is followed in texts forming explanations but may not be followed in commands (in grey boxes) for reasons of correct command or file syntax. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p><p class="line862">This document also uses the convention that commands that you are supposed to type at the shell prompt are in a grey box and have a dollar sign and space ('<tt class="backtick">$ </tt>') preceeding them.  You should type (or copy/paste) the command without the leading <tt class="backtick">$</tt> (but be sure to include any other <tt class="backtick">$</tt> characters not at the start).  Other text may appear in a grey box as well, without a leading <tt class="backtick">$</tt>.  The meaning of this text will be clear from context. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line867">
</p><h2 id="Remove_existing_jhbuild_install">Remove existing jhbuild install</h2>
<span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line874">It's possible that you're visiting this page after having used jhbuild before (or getting half-way through trying to use it).  You should make sure that any files you created before are removed so that we can start fresh. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span></p><p class="line874">Specifically, ensure that none of these exist: <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span></p><ul><li><p class="line891"><tt class="backtick">~/bin/jhbuild</tt> <span class="anchor" id="line-32"></span></p></li><li><p class="line891"><tt class="backtick">~/.local/bin/jhbuild</tt> <span class="anchor" id="line-33"></span></p></li><li><p class="line891"><tt class="backtick">~/.local/share/jhbuild/</tt> <span class="anchor" id="line-34"></span></p></li><li><p class="line891"><tt class="backtick">~/.cache/jhbuild/</tt> <span class="anchor" id="line-35"></span></p></li><li><p class="line891"><tt class="backtick">~/.config/jhbuildrc</tt> <span class="anchor" id="line-36"></span></p></li><li><p class="line891"><tt class="backtick">~/.jhbuildrc</tt> <span class="anchor" id="line-37"></span></p></li><li><p class="line891"><tt class="backtick">~/jhbuild/</tt> <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></p></li></ul><p class="line867"><img alt="/!\" height="16" src="https://wiki.gnome.org/gnome/gnome-responsive/img/dialog-warning-symbolic.png" title="/!\" width="16"></img> Be extremely careful when copying the following command.  A very small mistake (such as a misplaced space) could result in deleting large numbers of your personal files. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span></p><p class="line867"><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span></p><pre><span class="anchor" id="line-1"></span> $ rm -rf ~/bin/jhbuild ~/.local/bin/jhbuild ~/.local/share/jhbuild ~/.cache/jhbuild ~/.config/jhbuildrc ~/.jhbuildrc ~/jhbuild</pre><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><p class="line862">You may also have a <tt class="backtick">~/checkout/</tt> directory that was created by jhbuild.  It is safe to erase this directory as long as you have not placed files in it by yourself.  Depending on how far you got with a previous jhbuild setup, you may also have an <tt class="backtick">/opt/gnome/</tt> directory that can be deleted. <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></p><p class="line862">Some jhbuild setup instructions also advise you to modify your <tt class="backtick">~/.bashrc</tt> by adding a <tt class="backtick">PATH=</tt> line.  This will cause some very serious problems, so you should ensure that you have not done this.  Check your <tt class="backtick">.bashrc</tt> file to ensure that there are no lines at the very bottom saying something about '<tt class="backtick">export PATH=</tt>(big list of directories)'.  If you find that line, erase it. <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span></p><p class="line862">Finally, remove any distribution package for jhbuild you may have installed (<tt class="backtick">apt-get remove jhbuild</tt>, <tt class="backtick">yum remove jhbuild</tt>).  These packages are almost always out of date and it's best to avoid them. <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span></p><p class="line867">
</p><h2 id="Understanding_the_directory_layout">Understanding the directory layout</h2>
<span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><p class="line874">The jhbuild setup described on this page will result in the following directories and files existing. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></p><p class="line874">We group these sets of files into two categories: <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span></p><ul><li>the files that comprise jhbuild itself <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span></li><li class="gap">files created by jhbuilding (downloading, compiling and installing GNOME programs) <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></li></ul><p class="line862">Almost all files that we create will be installed in the newly-created <tt class="backtick">~/jhbuild/</tt> directory. <span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span></p><p class="line867">
</p><h2 id="Files_that_comprise_jhbuild_itself">Files that comprise jhbuild itself</h2>
<span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><ul><li><p class="line862">we will download jhbuild in <tt class="backtick">~/jhbuild/jhbuild/</tt> <span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span></p></li><li class="gap">jhbuild will install itself into two locations: <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><ul><li><p class="line891"><tt class="backtick">~/.local/share/jhbuild/</tt> - the bulk of files will be installed to this directory <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></p></li><li class="gap"><p class="line891"><tt class="backtick">~/.local/bin/jhbuild</tt> - the main executable will be installed as this file <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span></p></li></ul></li><li class="gap"><p class="line891"><tt class="backtick">~/bin/jhbuild</tt> - we will create this symbolic link so that jhbuild is in the <tt class="backtick">PATH</tt> <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span></p></li></ul><p class="line867">
</p><h3 id="Files_created_by_jhbuilding">Files created by jhbuilding</h3>
<span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><ul><li><p class="line891"><tt class="backtick">~/.cache/jhbuild/downloads/</tt> - jhbuild will download .tar.gz files to here <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span></p></li><li class="gap"><p class="line891"><tt class="backtick">~/jhbuild/checkout/</tt> - jhbuild will unpack and compile software in this directory <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span></p></li><li class="gap"><p class="line891"><tt class="backtick">~/jhbuild/install</tt> - jhbuild will install software into this directory <span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span></p></li></ul><p class="line867">
</p><h2 id="Download_and_install_jhbuild">Download and install jhbuild</h2>
<span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line862">First, create the <tt class="backtick">~/jhbuild/</tt> directory mentioned above. <span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span></p><p class="line867"><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></p><pre><span class="anchor" id="line-1-1"></span> $ mkdir ~/jhbuild</pre><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><p class="line874">If you get an error saying that the directory already exists then you should probably delete it and create it again freshly.  Old files hanging around in this directory can cause problems later on. <span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span></p><p class="line862">Change into that directory and use <tt class="backtick">git</tt> to download jhbuild from <tt class="backtick">gitlab.gnome.org</tt>: <span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span></p><p class="line867"><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span></p><pre><span class="anchor" id="line-1-2"></span> $ cd ~/jhbuild
<span class="anchor" id="line-2"></span> $ git clone --depth=1 https://gitlab.gnome.org/GNOME/jhbuild.git</pre><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><p class="line874">You should see something along these lines: <span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span></p><p class="line867"><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span></p><pre><span class="anchor" id="line-1-3"></span>Cloning into 'jhbuild'...
<span class="anchor" id="line-2-1"></span>remote: Counting objects: 32729, done.
<span class="anchor" id="line-3"></span>remote: Compressing objects: 100% (10433/10433), done.
<span class="anchor" id="line-4"></span>remote: Total 32729 (delta 25359), reused 28610 (delta 22178)
<span class="anchor" id="line-5"></span>Receiving objects: 100% (32729/32729), 6.40 MiB | 701 KiB/s, done.
<span class="anchor" id="line-6"></span>Resolving deltas: 100% (25359/25359), done.</pre><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><p class="line862">After that is done, enter the <tt class="backtick">~/jhbuild/jhbuild</tt> directory. <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></p><p class="line867"><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span></p><pre><span class="anchor" id="line-1-4"></span> $ cd ~/jhbuild/jhbuild</pre><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><p class="line874">The easiest and fastest way to make and install jhbuild is using the 'simple install' option: <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span></p><p class="line867"><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span></p><pre><span class="anchor" id="line-1-5"></span> $ ./autogen.sh --simple-install
<span class="anchor" id="line-2-2"></span> $ make
<span class="anchor" id="line-3-1"></span> $ make install</pre><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line874">jhbuild should now be installed. <span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span></p><p class="line867">
</p><h2 id="Ensure_.2BAH4-.2F.local.2Fbin_or_.2BAH4-.2Fbin.2F_exists_and_is_in_your_PATH">Ensure ~/.local/bin or ~/bin/ exists and is in your PATH</h2>
<span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><p class="line867"><tt class="backtick">PATH</tt> is an environment variable that gives a list of directories to search for commands.  If you type "<tt class="backtick">foo</tt>" at the shell prompt then the shell looks for a file named "<tt class="backtick">foo</tt>" in each of the directories listed in <tt class="backtick">PATH</tt>, in order. <span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span></p><p class="line874">You can view the current value of your PATH by typing: <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span></p><p class="line867"><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span></p><pre><span class="anchor" id="line-1-6"></span> $ echo $PATH</pre><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><p class="line862">It should contain various directories with names like <tt class="backtick">/usr/bin/</tt>.  There are usually between about 5 and 10 of them depending on how your distribution sets things up. <span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span></p><p class="line862">Most distributions (Fedora, Debian, Ubuntu, etc.) will automatically add <tt class="backtick">~/bin/</tt> or <tt class="backtick">~/.local/bin</tt> to your path if it exists on login. If <tt class="backtick">~/.local/bin</tt> is in your PATH, skip to the next step. <span class="anchor" id="line-140"></span>If not, create the <tt class="backtick">~/bin</tt> folder if it don't exist. <span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span></p><p class="line867"><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span></p><pre><span class="anchor" id="line-1-7"></span> $ mkdir ~/bin</pre><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><p class="line862">Log out of your desktop and log back in again to ensure that the directory is added to your PATH.  Use the <tt class="backtick">echo</tt> command above to check. <span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span></p><p class="line862">Later on, we will put a link to the <tt class="backtick">jhbuild</tt> executable into the <tt class="backtick">~/bin/</tt> directory.  Because it is in your <tt class="backtick">PATH</tt>, you will be able to just type "<tt class="backtick">jhbuild</tt>" at the command prompt without having to give the full location every time. <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span></p><p class="line862">Now we have to set up the link in <tt class="backtick">~/bin/</tt> so that jhbuild is in our <tt class="backtick">PATH</tt>: <span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span></p><p class="line867"><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span></p><pre><span class="anchor" id="line-1-8"></span> $ ln -sf ~/.local/bin/jhbuild ~/bin/jhbuild</pre><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><p class="line862">Again, if you get an error that the file already exists, you should delete <tt class="backtick">~/bin/jhbuild</tt> and try to create it fresh, using the above command. <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span></p><p class="line867">
</p><h2 id="A.2BAH4-.2F.config.2Fjhbuildrc">~/.config/jhbuildrc</h2>
<span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><p class="line874">The JHBuild configuration file allows you to specify a range of options, including which modules and versions should be built, if any modules which should be skipped, and modifications to build options. As of some recent changes to jhbuild, there is no longer a need to use a config file. The default values should be fine. <span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span></p><p class="line862">However, if you want to make some tweaks, you can create the file at <tt class="backtick">~/.config/jhbuildrc</tt> and add configuration modifications to the file. Details on how to use the configuration file can be found <a class="https" href="https://developer.gnome.org/jhbuild/unstable/config-reference.html.en">in the JHBuild manual</a>. An empty file is the same as having no file at all, so if you want to make changes, you can just create a file with a single line that has your change and grow from there. There is no need to copy a 'sample file' to start with. <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span></p><p class="line874">At this point your jhbuild should be ready to go. <span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span></p><p class="line867">
</p><h2 id="System_dependencies">System dependencies</h2>
<span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><p class="line874">jhbuild has an integrated "sysdeps" feature to let you know if you have the required packages installed on your system for building a particular GNOME component.  You can check with the following command (for example, if you want to build gedit): <span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span></p><p class="line867"><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span></p><pre><span class="anchor" id="line-1-9"></span>$ jhbuild sysdeps gedit</pre><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><p class="line874">If you are on an rpm-based Linux distribution (Fedora, etc.) then you can also use jhbuild to install sysdeps: <span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span></p><p class="line867"><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span></p><pre><span class="anchor" id="line-1-10"></span>$ jhbuild sysdeps --install gedit</pre><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><p class="line862">If you are on a dpkg-based Linux distribution (Debian, Ubuntu, etc.) then it is possible to use jhbuild to install sysdeps, but it is slow, and requires that you first install an additional package called <tt class="backtick">apt-file</tt> and update its cache from time to time: <span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span></p><p class="line867"><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span></p><pre><span class="anchor" id="line-1-11"></span>$ sudo apt-get install apt-file
<span class="anchor" id="line-2-3"></span>$ sudo apt-file update
<span class="anchor" id="line-3-2"></span>$ jhbuild sysdeps --install gedit</pre><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><p class="line867"><tt class="backtick">jhbuild sysdeps</tt> doesn't know about a few basic dependencies that you should make sure you have installed.  Here is a non-exaustive list: <span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span></p><ul><li>git <span class="anchor" id="line-191"></span></li><li>gcc <span class="anchor" id="line-192"></span></li><li>g++ (gcc-c++) <span class="anchor" id="line-193"></span></li><li>docbook-xsl <span class="anchor" id="line-194"></span></li><li>python-libxml2 <span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span></li></ul><p class="line874">On dpkg-based systems, this might help: <span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span></p><p class="line867"><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span></p><pre><span class="anchor" id="line-1-12"></span>$ sudo apt-get install docbook-xsl build-essential git-core python-libxml2</pre><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><p class="line874">On rpm-based systems, try this: <span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span></p><p class="line867"><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span></p><pre><span class="anchor" id="line-1-13"></span>$ sudo yum groupinstall "Development Tools"
<span class="anchor" id="line-2-4"></span>$ sudo yum install docbook-style-xsl libxml2-python</pre><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><p class="line867">
</p><h2 id="Using_jhbuild">Using jhbuild</h2>
<span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><p class="line874">You should now be able to build GNOME programs using jhbuild.  Try building something simple: <span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span></p><p class="line867"><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span></p><pre><span class="anchor" id="line-1-14"></span> $ jhbuild build glib</pre><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><p class="line862">This will download the code for <tt class="backtick">glib</tt>, configure, build and install it for you. It will also install any dependencies that are required. To see a list of other GNOME modules that you can try, see <a class="https" href="https://gitlab.gnome.org/GNOME/">gitlab.gnome.org</a>. <span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span></p><p class="line874">If you want to run programs that you have compiled with jhbuild, you must do so using: <span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span></p><p class="line867"><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span></p><pre><span class="anchor" id="line-1-15"></span> $ jhbuild run commandname</pre><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><p class="line862">Running a command explicitly with jhbuild is required so that jhbuild doesn't replace the system-installed version of the command (the one that gets run when you just type <tt class="backtick">commandname</tt>) with a possibly-broken new version. <span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span></p><p class="line867">
</p><h2 id="Updating_a_build">Updating a build</h2>
<span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><p class="line862">To update a module to use the latest code, simply re-run the original <tt class="backtick">build</tt> command (such as <tt class="backtick">jhbuild build glib</tt> in the example above). This will update any modules that have changed since the command was last run. <span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span></p><p class="line874">To test local changes that have been made to a module, run: <span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span></p><p class="line867"><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span></p><pre><span class="anchor" id="line-1-16"></span> $ jhbuild buildone -n modulename</pre><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><p class="line862">'buildone' only builds the specified module, ignoring any dependencies that may have been updated. The <tt class="backtick">-n</tt> option means that the code will not be updated from its online repository. Local changes will be preserved. <span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span></p><p class="line867">
</p><h2 id="If_things_go_wrong">If things go wrong</h2>
<span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><p class="line874">Here are a list of some common issues you may hit: <span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span></p><p class="line867">
</p><h3 id="A-bash:_jhbuild:_Command_not_found">-bash: jhbuild: Command not found</h3>
<span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><p class="line862">This means that one way or another, <tt class="backtick">jhbuild</tt> is not in your <tt class="backtick">PATH</tt>.  You should check three things: <span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span></p><p class="line862">First, Ensure that <tt class="backtick">~/bin/</tt> is in your <tt class="backtick">PATH</tt>: <span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span></p><p class="line867"><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span></p><pre><span class="anchor" id="line-1-17"></span> $ echo $PATH</pre><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><p class="line862">The path name will be expanded and look like <tt class="backtick">/home/you/bin</tt> (where "<tt class="backtick">you</tt>" is your username).  If it is not there, you probably need to logout of your desktop and log back in again after having created the <tt class="backtick">~/bin/</tt> directory.  It is also possible that your distribution does not automatically add this directory to your <tt class="backtick">PATH</tt>: consider filing a bug, or use their support resources to determine how to do this for yourself. <span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span></p><p class="line862">Secondly, ensure that the symbolic link <tt class="backtick">~/bin/jhbuild</tt> exists and points to <tt class="backtick">~/.local/bin/jhbuild</tt>: <span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span></p><p class="line867"><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span></p><pre><span class="anchor" id="line-1-18"></span> $ ls -l ~/bin/jhbuild</pre><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><p class="line874">should show something along these lines: <span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span></p><p class="line867"><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span></p><pre><span class="anchor" id="line-1-19"></span>lrwxrwxrwx 1 you you 30 Jun 21 13:55 /home/you/bin/jhbuild -&gt; /home/you/.local/bin/jhbuild</pre><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><p class="line874">If it does not, you need to create the symbolic link properly.  Follow the instructions above. <span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span></p><p class="line874">Finally, ensure that the destination of the symbolic link exists and is executable: <span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span></p><p class="line867"><span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span></p><pre><span class="anchor" id="line-1-20"></span> $ ls -l ~/.local/bin/jhbuild</pre><span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><p class="line874">should show something like: <span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span></p><p class="line867"><span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span></p><pre><span class="anchor" id="line-1-21"></span>-rwxr-xr-x 1 you you 775 Jun 21 13:53 /home/you/.local/bin/jhbuild</pre><span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><p class="line874">If not, then jhbuild was not properly installed.  Make sure you followed the above instructions properly and that there were no failures at that point. <span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span></p><p class="line867">
</p><h3 id="I_am_getting_errors_about_.2Fopt.2Fgnome">I am getting errors about /opt/gnome</h3>
<span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><p class="line862">Old versions of jhbuild tried to install files to <tt class="backtick">/opt/gnome</tt>. Make sure you're using the new version of jhbuild, and not from a distro package. You can test if you're using a distro-installed version of jhbuild like so: <span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span></p><p class="line867"><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span></p><pre><span class="anchor" id="line-1-22"></span>$ which jhbuild
<span class="anchor" id="line-2-5"></span>/usr/bin/jhbuild</pre><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><p class="line862">If the file is <tt class="backtick">/usr/bin/jhbuild</tt>, then it's a distro-installed version of jhbuild. Uninstall this, and follow the instructions above to set up a more recent, local version from git. <span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span></p><p class="line867">
</p><h3 id="Errors_about_missing_dependencies">Errors about missing dependencies</h3>
<span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><p class="line874">You may see errors like: <span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span></p><p class="line867"><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span></p><pre><span class="anchor" id="line-1-23"></span>Required packages:
<span class="anchor" id="line-2-6"></span>  System installed packages which are too old:
<span class="anchor" id="line-3-3"></span>    (none)
<span class="anchor" id="line-4-1"></span>  No matching system package installed:
<span class="anchor" id="line-5-1"></span>    python-devel (python3.pc, required=3.2)
<span class="anchor" id="line-6-1"></span>    libffi (libffi.pc, required=3.0.0)
<span class="anchor" id="line-7"></span>    python2-devel (python.pc, required=2.5)
<span class="anchor" id="line-8"></span>    zlib (zlib.pc, required=1.0)
<span class="anchor" id="line-9"></span>    flex (required=2.0)
<span class="anchor" id="line-10"></span>    bison (required=2.0)
<span class="anchor" id="line-11"></span>    cairo (cairo.pc, required=1.10.2)
<span class="anchor" id="line-12"></span>jhbuild build: Required system dependencies not installed. Install using the command 'jhbuild sysdeps --install' or to ignore system dependencies use command-line option --nodeps</pre><span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span><p class="line874">or <span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span></p><p class="line867"><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span></p><pre><span class="anchor" id="line-1-24"></span>configure: error: libnl development header are required</pre><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><p class="line874">or <span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span></p><p class="line867"><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span></p><pre><span class="anchor" id="line-1-25"></span>configure: error: Package requirements (udisks2 &gt;= 1.99.0) were not met:
<span class="anchor" id="line-2-7"></span>
<span class="anchor" id="line-3-4"></span>No package 'udisks2' found</pre><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><p class="line874">These are by far the most common type of error you will see when building software with jhbuild. <span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span></p><p class="line862">This means that you need to install some additional supporting packages from your distribution.  On Debian (or Ubuntu) systems these packages usually have names like <tt class="backtick">lib_____-dev</tt> where the blank is filled in by the name of the package that is being complained about (for example <tt class="backtick">libudisks2-dev</tt> and <tt class="backtick">libnl-dev</tt> for the above errors).  On RPM-based systems (Fedora, SuSE, etc). the packages usually have names ending with '<tt class="backtick">-devel</tt>' rather than '<tt class="backtick">-dev</tt>' and may or may not start with <tt class="backtick">lib</tt>. <span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span></p><p class="line862">In all cases, these are just conventions, and packages could be named anything at all.  Search in your package manager.  If that doesn't work, try asking on IRC (<strong>#newcomers</strong> on irc.gnome.org). <span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span></p><p class="line874">In some cases, 'jhbuild sysdeps --install' (as mentioned above) may help.  This is not always reliable, however (but we are trying to improve it). <span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span></p><p class="line867">
</p><h3 id="I_am_having_another_problem_building_a_particular_module">I am having another problem building a particular module</h3>
<span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><p class="line862">jhbuild operates by building the bleeding edge development version of GNOME.  There are often problems.  Check <a href="https://wiki.gnome.org/JhbuildIssues">JhbuildIssues</a> to see if your problem is mentioned.  Otherwise, try asking for help on mailing lists or IRC.  Often many other people are experiencing the same problems as you are and they may have figured out how to fix them. <span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span></p><p class="line862">Sometimes bugs are related to existing installed or checked out versions of files causing issues with the build of the new version.  In this case, option <tt class="backtick">6, Go to phase "wipe directory and start over"</tt>, can be very helpful, but it might mean that you need to download the module again. <span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span></p><p class="line862">An even bigger hammer is to quit jhbuild and completely erase your <tt class="backtick">~/jhbuild/checkout</tt> and <tt class="backtick">~/jhbuild/install</tt> directories.  You will be left in a clean state but you will have to redownload and recompile everything. <span class="anchor" id="line-342"></span><span class="anchor" id="bottom"></span></p></div></div><div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="index.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
