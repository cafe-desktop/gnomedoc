<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../../skin/gtkdoc.css" type="text/css"></link><link rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/lgo2010.css"></link><link rel="icon" type="image/png" href="../../skin/gnome-16.png"></link><link rel="SHORTCUT ICON" type="image/png" href="../../skin/gnome-16.png"></link><link rel="search" type="application/opensearchdescription+xml" href="../../gnome-library-search.xml" title="GNOME Library Search"></link><link rel="stylesheet" type="text/css" href="../../skin/jquery.autocomplete.css"></link><script type="text/javascript" src="../../js/jquery.js"></script><script type="text/javascript" src="../../js/jquery.autocomplete.js"></script><title>libmediaart Library Reference Manual: Extraction</title><link href="index.html" rel="home" title="libmediaart Library Reference Manual"></link><link href="ch02.html" rel="up" title="Reference"></link><link href="ch02.html" rel="prev" title="Reference"></link><link href="libmediaart-Cache.html" rel="next" title="Cache"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/jquery.autocomplete.css"></link><link rel="stylesheet" type="text/css" media="all" href="../../skin/960_24_col.css"></link><script type="text/javascript" src="../../js/jquery.js"></script><script type="text/javascript" src="https://developer-old.gnome.org/js/jquery.jcarousel.min.js"></script><script type="text/javascript" src="../../js/jquery.autocomplete.js"></script></head><body><div id="accessibility_access"><ul><li><a href="libmediaart-MediaArtProcess.html#container">Go to page content</a></li><li><a href="libmediaart-MediaArtProcess.html#top_bar">Go to main menu</a></li><li><a href="libmediaart-MediaArtProcess.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/symbols/"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form><script type="text/javascript">
$('#s').autocomplete('/symbols/lookup/',
        { minChars:3, matchSubset:1, matchContains:1, cacheLength:10,
          selectOnly:1, rowsLimit:25 });
              </script></div></div></div><div class="clearfix"></div><div id="container" class="gtk-doc"><div class="content"><table cellpadding="2" cellspacing="5" class="navigation" id="top" summary="Navigation header" width="100%"><tbody><tr valign="middle">
<td align="left" class="shortcuts" width="100%">
<a class="shortcut" href="libmediaart-MediaArtProcess.html#">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a class="shortcut" href="libmediaart-MediaArtProcess.html#libmediaart-MediaArtProcess.description">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img alt="Home" border="0" height="16" src="home.png" width="16"></img></a></td>
<td><a accesskey="u" href="ch02.html"><img alt="Up" border="0" height="16" src="up.png" width="16"></img></a></td>
<td><a accesskey="p" href="ch02.html"><img alt="Prev" border="0" height="16" src="left.png" width="16"></img></a></td>
<td><a accesskey="n" href="libmediaart-Cache.html"><img alt="Next" border="0" height="16" src="right.png" width="16"></img></a></td>
</tr></tbody></table><div class="refentry">
<a name="libmediaart-MediaArtProcess"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tbody><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libmediaart-MediaArtProcess.top_of_page"></a>Extraction</span></h2>
<p>Extraction — Extraction of music and movie art.</p>
</td>
<td align="right" class="gallery_image" valign="top"></td>
</tr></tbody></table></div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.functions"></a><h2>Functions</h2>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="functions_return" width="150px"></col>
<col class="functions_name"></col>
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a href="../../glib/unstable/glib-Quarks.html#GQuark"><span class="returnvalue">GQuark</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-error-quark" title="media_art_error_quark ()">media_art_error_quark</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="../../gobject/unstable/gobject-Type-Information.html#GType"><span class="returnvalue">GType</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-get-type" title="media_art_process_get_type ()">media_art_process_get_type</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="returnvalue">MediaArtProcess</span></a> *
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-new" title="media_art_process_new ()">media_art_process_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="../../glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-uri" title="media_art_process_uri ()">media_art_process_uri</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="../../glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()">media_art_process_file</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="../../glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()">media_art_process_buffer</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="name" width="150px"></col>
<col class="description"></col>
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType">MediaArtType</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtError" title="enum MediaArtError">MediaArtError</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags">MediaArtProcessFlags</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess">MediaArtProcess</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessClass" title="struct MediaArtProcessClass">MediaArtProcessClass</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libmediaart/mediaart.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.description"></a><h2>Description</h2>
<p>The libmediaart library supports taking image data that you have extracted
from a media file and saving it into the media art cache, so that future
applications can display the media art without having to extract the image
again. This is done using the <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a> or
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a> functions.</p>
<p>Extracting new media art from a file needs to be done by your application.
Usually, when an application loads a media file any embedded images will be
made available as a side effect. For example, if you are using GStreamer any
images will be returned through the <span class="type">GstTagList</span> interface as <code class="literal">GST_TAG_IMAGE</code>
tags.</p>
<p>The media art cache requires that all images are saved as 'application/jpeg'
files. Embedded images can be in several formats, and
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a> and <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a> functions will
convert the supplied image data into the correct format if
necessary. There are multiple backends that can be used for this,
and you can choose which is used at build time using the library's
'configure' script.</p>
<p>If there is no embedded media art in a file,
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a> and <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a> functions will
look in the directory that contains the media file for likely media
art using a simple heuristic.</p>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="media-art-error-quark"></a><h3>media_art_error_quark ()</h3>
<pre class="programlisting"><a href="../../glib/unstable/glib-Quarks.html#GQuark"><span class="returnvalue">GQuark</span></a>
media_art_error_quark (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<div class="refsect3">
<a name="id-1.3.3.2.7.2.4"></a><h4>Returns</h4>
<p> the <a href="../../glib/unstable/glib-Quarks.html#GQuark"><span class="type">GQuark</span></a> used to identify media art errors in
GError structures.</p>
<p></p>
</div>
<p class="since">Since 0.2.0</p>
</div>
<hr></hr>
<div class="refsect2">
<a name="media-art-process-get-type"></a><h3>media_art_process_get_type ()</h3>
<pre class="programlisting"><a href="../../gobject/unstable/gobject-Type-Information.html#GType"><span class="returnvalue">GType</span></a>
media_art_process_get_type (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.3.5"></a><h4>Returns</h4>
<p></p>
</div>
</div>
<hr></hr>
<div class="refsect2">
<a name="media-art-process-new"></a><h3>media_art_process_new ()</h3>
<pre class="programlisting"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="returnvalue">MediaArtProcess</span></a> *
media_art_process_new (<em class="parameter"><code><a href="../../glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Initialize a GObject for processing and extracting media art.</p>
<p>This function initializes cache hash tables, backend plugins,
storage modules used for removable devices and a connection to D-Bus.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.4.6"></a><h4>Parameters</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="parameters_name" width="150px"></col>
<col class="parameters_description"></col>
<col class="parameters_annotations" width="200px"></col>
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>Pointer to potential GLib / MediaArt error, or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.4.7"></a><h4>Returns</h4>
<p> A new <a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> object on success or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> if
<em class="parameter"><code>error</code></em>
is set. This object must be freed using <a href="../../gobject/unstable/gobject-The-Base-Object-Type.html#g-object-unref"><code class="function">g_object_unref()</code></a>.</p>
<p></p>
</div>
<p class="since">Since 0.5.0</p>
</div>
<hr></hr>
<div class="refsect2">
<a name="media-art-process-uri"></a><h3>media_art_process_uri ()</h3>
<pre class="programlisting"><a href="../../glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
media_art_process_uri (<em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> *process</code></em>,
                       <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType"><span class="type">MediaArtType</span></a> type</code></em>,
                       <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags"><span class="type">MediaArtProcessFlags</span></a> flags</code></em>,
                       <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *uri</code></em>,
                       <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *artist</code></em>,
                       <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *title</code></em>,
                       <em class="parameter"><code><a href="../../gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> *cancellable</code></em>,
                       <em class="parameter"><code><a href="../../glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>This function calls <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a>, but takes the <em class="parameter"><code>uri</code></em>
 as
a string rather than a <a href="../../gio/unstable/GFile.html"><span class="type">GFile</span></a> object. Either <em class="parameter"><code>artist</code></em>
 OR <em class="parameter"><code>title</code></em>
 can be
<a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, but they can not both be <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.5.5"></a><h4>Parameters</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="parameters_name" width="150px"></col>
<col class="parameters_description"></col>
<col class="parameters_annotations" width="200px"></col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>process</p></td>
<td class="parameter_description"><p>Media art process object</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>The type of media that contained the image data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>How the media art is processed</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>uri</p></td>
<td class="parameter_description"><p>URI of the media file that contained the data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>artist</p></td>
<td class="parameter_description"><p> The artist name <em class="parameter"><code>uri</code></em>
or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>title</p></td>
<td class="parameter_description"><p> The title for <em class="parameter"><code>uri</code></em>
or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p> optional <a href="../../gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> object, <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> to
ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>Pointer to potential GLib / MediaArt error, or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.5.6"></a><h4>Returns</h4>
<p> <a href="../../glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if <em class="parameter"><code>uri</code></em>
could be processed or <a href="../../glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if <em class="parameter"><code>error</code></em>
is set.</p>
<p></p>
</div>
<p class="since">Since 0.5.0</p>
</div>
<hr></hr>
<div class="refsect2">
<a name="media-art-process-file"></a><h3>media_art_process_file ()</h3>
<pre class="programlisting"><a href="../../glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
media_art_process_file (<em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> *process</code></em>,
                        <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType"><span class="type">MediaArtType</span></a> type</code></em>,
                        <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags"><span class="type">MediaArtProcessFlags</span></a> flags</code></em>,
                        <em class="parameter"><code><a href="../../gio/unstable/GFile.html"><span class="type">GFile</span></a> *file</code></em>,
                        <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *artist</code></em>,
                        <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *title</code></em>,
                        <em class="parameter"><code><a href="../../gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> *cancellable</code></em>,
                        <em class="parameter"><code><a href="../../glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Process <em class="parameter"><code>file</code></em>
 and check if media art exists and if it is up to date
with <em class="parameter"><code>artist</code></em>
 and <em class="parameter"><code>title</code></em>
 provided. Either <em class="parameter"><code>artist</code></em>
 OR <em class="parameter"><code>title</code></em>
 can be
<a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, but they can not both be <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.</p>
<p>NOTE: This function MAY retrieve media art for
<em class="parameter"><code>artist</code></em>
 and <em class="parameter"><code>title</code></em>
 combinations. It is not guaranteed and depends
on download services available over DBus at the time.</p>
<p>In cases where download is unavailable, <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a>
will only try to procure a cache for possible media art found in
directories surrounding the location of <em class="parameter"><code>file</code></em>
. If a buffer or
memory chunk needs to be saved to disk which has been retrieved
from an MP3 (for example), you should use
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a>.</p>
<p>The modification time (mtime) of <em class="parameter"><code>file</code></em>
 is checked against the
cached stored for <em class="parameter"><code>artist</code></em>
 and <em class="parameter"><code>title</code></em>
. If the cache is old or
doesn't exist, it will be updated. What this actually does is
update the mtime of the cache (a symlink) on the disk.</p>
<p>If there is no actual media art stored locally (for example, it's
stored in a directory on a removable device), it is copied locally
(usually to an XDG cache directory).</p>
<p>If <em class="parameter"><code>file</code></em>
 is on a removable filesystem, the media art file will be
saved in a cache on the removable file system rather than on the
host machine.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.6.10"></a><h4>Parameters</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="parameters_name" width="150px"></col>
<col class="parameters_description"></col>
<col class="parameters_annotations" width="200px"></col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>process</p></td>
<td class="parameter_description"><p>Media art process object</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>The type of media</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>The options given for how to process the media art</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>file</p></td>
<td class="parameter_description"><p>File to be processed</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>artist</p></td>
<td class="parameter_description"><p> The artist name <em class="parameter"><code>file</code></em>
or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>title</p></td>
<td class="parameter_description"><p> The title for <em class="parameter"><code>file</code></em>
or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p> optional <a href="../../gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> object, <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> to
ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <a href="../../glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> location to store the error occurring, or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>
to ignore.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.6.11"></a><h4>Returns</h4>
<p> <a href="../../glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if <em class="parameter"><code>file</code></em>
could be processed or <a href="../../glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if <em class="parameter"><code>error</code></em>
is set.</p>
<p></p>
</div>
<p class="since">Since 0.3.0</p>
</div>
<hr></hr>
<div class="refsect2">
<a name="media-art-process-buffer"></a><h3>media_art_process_buffer ()</h3>
<pre class="programlisting"><a href="../../glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
media_art_process_buffer (<em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> *process</code></em>,
                          <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType"><span class="type">MediaArtType</span></a> type</code></em>,
                          <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags"><span class="type">MediaArtProcessFlags</span></a> flags</code></em>,
                          <em class="parameter"><code><a href="../../gio/unstable/GFile.html"><span class="type">GFile</span></a> *related_file</code></em>,
                          <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#guchar"><span class="type">guchar</span></a> *buffer</code></em>,
                          <em class="parameter"><code><a href="../../glib/unstable/glib-Basic-Types.html#gsize"><span class="type">gsize</span></a> len</code></em>,
                          <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *mime</code></em>,
                          <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *artist</code></em>,
                          <em class="parameter"><code>const <a href="../../glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *title</code></em>,
                          <em class="parameter"><code><a href="../../gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> *cancellable</code></em>,
                          <em class="parameter"><code><a href="../../glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Processes a memory buffer represented by <em class="parameter"><code>buffer</code></em>
 and <em class="parameter"><code>len</code></em>
. If you
have extracted any embedded media art and passed this in as
<em class="parameter"><code>buffer</code></em>
, the image data will be converted to the correct format and
saved in the media art cache.</p>
<p>Either <em class="parameter"><code>artist</code></em>
 OR <em class="parameter"><code>title</code></em>
 can be <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, but they can not both be <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.</p>
<p>If <em class="parameter"><code>file</code></em>
 is on a removable filesystem, the media art file will be saved in a
cache on the removable file system rather than on the host machine.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.7.7"></a><h4>Parameters</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="parameters_name" width="150px"></col>
<col class="parameters_description"></col>
<col class="parameters_annotations" width="200px"></col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>process</p></td>
<td class="parameter_description"><p>Media art process object</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>The type of media</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>The options given for how to process the media art</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>related_file</p></td>
<td class="parameter_description"><p>File related to the media art</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buffer</p></td>
<td class="parameter_description"><p> a buffer containing <em class="parameter"><code>file</code></em>
data, or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter points to an array of items."><span class="acronym">array</span></acronym> length=len][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>length of <em class="parameter"><code>buffer</code></em>
, or 0</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>mime</p></td>
<td class="parameter_description"><p>MIME type of <em class="parameter"><code>buffer</code></em>
, or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>artist</p></td>
<td class="parameter_description"><p> The artist name <em class="parameter"><code>file</code></em>
or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>title</p></td>
<td class="parameter_description"><p> The title for <em class="parameter"><code>file</code></em>
or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p> optional <a href="../../gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> object, <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> to
ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <a href="../../glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> location to store the error occurring, or <a href="../../glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>
to ignore.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.7.8"></a><h4>Returns</h4>
<p> <a href="../../glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if <em class="parameter"><code>file</code></em>
could be processed or <a href="../../glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if <em class="parameter"><code>error</code></em>
is set.</p>
<p></p>
</div>
<p class="since">Since 0.5.0</p>
</div>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="MediaArtType"></a><h3>enum MediaArtType</h3>
<p>This type categorized the type of media art we're dealing with.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.2.4"></a><h4>Members</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="enum_members_name" width="300px"></col>
<col class="enum_members_description"></col>
<col class="enum_members_annotations" width="200px"></col>
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-NONE:CAPS"></a>MEDIA_ART_NONE</p></td>
<td class="enum_member_description">
<p>No media art is available</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ALBUM:CAPS"></a>MEDIA_ART_ALBUM</p></td>
<td class="enum_member_description">
<p>Media art is an album</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-VIDEO:CAPS"></a>MEDIA_ART_VIDEO</p></td>
<td class="enum_member_description">
<p>Media art is a movie or video</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr></hr>
<div class="refsect2">
<a name="MediaArtError"></a><h3>enum MediaArtError</h3>
<p>Enumeration values used in errors returned by the
<a class="link" href="libmediaart-MediaArtProcess.html#MediaArtError" title="enum MediaArtError"><span class="type">MediaArtError</span></a> API.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.3.4"></a><h4>Members</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="enum_members_name" width="300px"></col>
<col class="enum_members_description"></col>
<col class="enum_members_annotations" width="200px"></col>
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-NO-STORAGE:CAPS"></a>MEDIA_ART_ERROR_NO_STORAGE</p></td>
<td class="enum_member_description">
<p>Storage information is unknown, we
have no knowledge about removable media.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-NO-TITLE:CAPS"></a>MEDIA_ART_ERROR_NO_TITLE</p></td>
<td class="enum_member_description">
<p>Title is required, but was not provided,
or was empty.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-SYMLINK-FAILED:CAPS"></a>MEDIA_ART_ERROR_SYMLINK_FAILED</p></td>
<td class="enum_member_description">
<p>A call to <code class="function">symlink()</code> failed
resulting in the incorrect storage of media art.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-RENAME-FAILED:CAPS"></a>MEDIA_ART_ERROR_RENAME_FAILED</p></td>
<td class="enum_member_description">
<p>File could not be renamed.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-NO-CACHE-DIR:CAPS"></a>MEDIA_ART_ERROR_NO_CACHE_DIR</p></td>
<td class="enum_member_description">
<p>This is given when the
XDG_CACHE_HOME directory could not be used to create the
'media-art' subdirectory used for caching media art. This is
usually an initiation error.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.2.0</p>
</div>
<hr></hr>
<div class="refsect2">
<a name="MediaArtProcessFlags"></a><h3>enum MediaArtProcessFlags</h3>
<p>This type categorized the flags used when processing media art.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.4.4"></a><h4>Members</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="enum_members_name" width="300px"></col>
<col class="enum_members_description"></col>
<col class="enum_members_annotations" width="200px"></col>
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-PROCESS-FLAGS-NONE:CAPS"></a>MEDIA_ART_PROCESS_FLAGS_NONE</p></td>
<td class="enum_member_description">
<p>Normal operation.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-PROCESS-FLAGS-FORCE:CAPS"></a>MEDIA_ART_PROCESS_FLAGS_FORCE</p></td>
<td class="enum_member_description">
<p>Force media art to be re-saved to disk even if it already exists and the related file or URI has the same modified time (mtime).</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.3.0</p>
</div>
<hr></hr>
<div class="refsect2">
<a name="MediaArtProcess"></a><h3>struct MediaArtProcess</h3>
<pre class="programlisting">struct MediaArtProcess {
	GObject parent;
};
</pre>
<p>A class implementation for processing and extracting media art.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.5.5"></a><h4>Members</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="struct_members_name" width="300px"></col>
<col class="struct_members_description"></col>
<col class="struct_members_annotations" width="200px"></col>
</colgroup>
<tbody><tr>
<td class="struct_member_name"><p><a href="../../gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> <em class="structfield"><code><a name="MediaArtProcess.parent"></a>parent</code></em>;</p></td>
<td class="struct_member_description"><p>parent object</p></td>
<td class="struct_member_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr></hr>
<div class="refsect2">
<a name="MediaArtProcessClass"></a><h3>struct MediaArtProcessClass</h3>
<pre class="programlisting">struct MediaArtProcessClass {
	GObjectClass parent;
};
</pre>
<p>Prototype for the class.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.6.5"></a><h4>Members</h4>
<div class="informaltable"><table border="0" width="100%">
<colgroup>
<col class="struct_members_name" width="300px"></col>
<col class="struct_members_description"></col>
<col class="struct_members_annotations" width="200px"></col>
</colgroup>
<tbody><tr>
<td class="struct_member_name"><p><a href="../../gobject/unstable/gobject-The-Base-Object-Type.html#GObjectClass"><span class="type">GObjectClass</span></a> <em class="structfield"><code><a name="MediaArtProcessClass.parent"></a>parent</code></em>;</p></td>
<td class="struct_member_description"><p>parent object class</p></td>
<td class="struct_member_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
</div><div class="footer">
<hr></hr>
          Generated by GTK-Doc V1.21.1</div></div><div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="libmediaart-MediaArtProcess.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
