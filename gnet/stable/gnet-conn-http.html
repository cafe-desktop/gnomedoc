<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GConnHttp: GNet Network Library Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="GNet Network Library Reference Manual">
<link rel="up" href="libgnet-reference.html" title="GNet Library Reference">
<link rel="prev" href="gnet-mcast.html" title="Mcast">
<link rel="next" href="gnet-conn.html" title="Conn">
<meta xmlns="http://www.w3.org/1999/xhtml" name="generator" content='GTK-Doc V"(~lgo)" (XML mode)'></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" media="all" href="https://static.gnome.org/css/grass-theme-style.css"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" media="all" href="../../skin/lgo2010.css"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="icon" type="image/png" href="../../skin/gnome-16.png"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="SHORTCUT ICON" type="image/png" href="../../skin/gnome-16.png"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="search" type="application/opensearchdescription+xml" href="../../gnome-library-search.xml" title="GNOME Library Search"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../../skin/jquery.autocomplete.css"></link><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../js/jquery.js"></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../../js/jquery.autocomplete.js"></script><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="gnet-overview.html" title="GNet Overview"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="gnet-developers.html" title="GNet for developers"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="gnet-examples.html" title="GNet Examples"></link><link xmlns="http://www.w3.org/1999/xhtml" rel="chapter" href="libgnet-reference.html" title="GNet Library Reference"></link>
</head>
<body><div id="accessibility_access"><ul><li><a href="gnet-conn-http.html#container">Go to page content</a></li><li><a href="gnet-conn-http.html#top_bar">Go to main menu</a></li><li><a href="gnet-conn-http.html#s" onclick="$('#s').focus(); return false;">Go to the search field</a></li></ul></div><div id="global_domain_bar"><div class="maxwidth"><div class="tab"><a class="root" href="https://www.gnome.org/">GNOME.org</a></div></div></div><div id="header" class="container_12"><div id="logo" class="grid_3"><a title="Go to home page" href="../../index.html"><img alt="GNOME: The Free Software Desktop Project" src="../../skin/gnome-logo-devcenter.png"></img></a></div><div id="top_bar" class="grid_9"><div class="left"><div class="menu-globalnav-container"><ul id="menu-globalnav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-6"><a href="../../about/index.html">About</a></li><li class="menu-item menu-item-type-post_type menu-item-23"><a href="https://help.gnome.org/users/">Users</a></li><li class="menu-item menu-item-type-post_type menu-item-40"><a href="https://help.gnome.org/admin/">Administrators</a></li><li class="current-menu-item"><a href="https://developer.gnome.org/">Developers</a></li></ul></div></div><div class="right"><form role="search" method="get" id="searchform" action="https://developer-old.gnome.org/symbols/"><div><label class="hidden" for="q">Search:
                        </label><input type="text" value="" name="q" id="s" placeholder="Search"></input></div></form><script type="text/javascript">
$('#s').autocomplete('/symbols/lookup/',
        { minChars:3, matchSubset:1, matchContains:1, cacheLength:10,
          selectOnly:1, rowsLimit:25 });
              </script></div></div></div><div class="clearfix"></div><div id="container"><table xmlns="" class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="gnet-conn-http.html#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="gnet-conn-http.html#gnet-conn-http.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="libgnet-reference.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="gnet-mcast.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="gnet-conn.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div xmlns="" class="refentry">
<a name="gnet-conn-http"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">GConnHttp</span></h2>
<p>GConnHttp — HTTP connection object</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;gnet.h&gt;


                    <a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a>;
enum                <a class="link" href="gnet-conn-http.html#GConnHttpMethod">GConnHttpMethod</a>;
enum                <a class="link" href="gnet-conn-http.html#GConnHttpError">GConnHttpError</a>;
enum                <a class="link" href="gnet-conn-http.html#GConnHttpEventType">GConnHttpEventType</a>;
                    <a class="link" href="gnet-conn-http.html#GConnHttpEvent">GConnHttpEvent</a>;
                    <a class="link" href="gnet-conn-http.html#GConnHttpEventResolved">GConnHttpEventResolved</a>;
                    <a class="link" href="gnet-conn-http.html#GConnHttpEventResponse">GConnHttpEventResponse</a>;
                    <a class="link" href="gnet-conn-http.html#GConnHttpEventRedirect">GConnHttpEventRedirect</a>;
                    <a class="link" href="gnet-conn-http.html#GConnHttpEventData">GConnHttpEventData</a>;
                    <a class="link" href="gnet-conn-http.html#GConnHttpEventError">GConnHttpEventError</a>;
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                (<a class="link" href="gnet-conn-http.html#GConnHttpFunc">*GConnHttpFunc</a>)                    (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpEvent">GConnHttpEvent</a> *event,
                                                         <GTKDOCLINK HREF="gpointer">gpointer</GTKDOCLINK> user_data);
enum                <a class="link" href="gnet-conn-http.html#GConnHttpHeaderFlags">GConnHttpHeaderFlags</a>;
<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a>*          <a class="link" href="gnet-conn-http.html#gnet-conn-http-new">gnet_conn_http_new</a>                  (void);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-uri">gnet_conn_http_set_uri</a>              (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *uri);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-escaped-uri">gnet_conn_http_set_escaped_uri</a>      (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *uri);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-header">gnet_conn_http_set_header</a>           (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *field,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *value,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpHeaderFlags">GConnHttpHeaderFlags</a> flags);
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-max-redirects">gnet_conn_http_set_max_redirects</a>    (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="guint">guint</GTKDOCLINK> num);
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-timeout">gnet_conn_http_set_timeout</a>          (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="guint">guint</GTKDOCLINK> timeout);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-user-agent">gnet_conn_http_set_user_agent</a>       (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *agent);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-method">gnet_conn_http_set_method</a>           (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpMethod">GConnHttpMethod</a> method,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *post_data,
                                                         <GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> post_data_len);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-main-context">gnet_conn_http_set_main_context</a>     (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="GMainContext">GMainContext</GTKDOCLINK> *context);
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                <a class="link" href="gnet-conn-http.html#gnet-conn-http-run-async">gnet_conn_http_run_async</a>            (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpFunc">GConnHttpFunc</a> func,
                                                         <GTKDOCLINK HREF="gpointer">gpointer</GTKDOCLINK> user_data);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-run">gnet_conn_http_run</a>                  (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpFunc">GConnHttpFunc</a> func,
                                                         <GTKDOCLINK HREF="gpointer">gpointer</GTKDOCLINK> user_data);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-conn-http-steal-buffer">gnet_conn_http_steal_buffer</a>         (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> **buffer,
                                                         <GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> *length);
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                <a class="link" href="gnet-conn-http.html#gnet-conn-http-cancel">gnet_conn_http_cancel</a>               (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn);
<GTKDOCLINK HREF="void">void</GTKDOCLINK>                <a class="link" href="gnet-conn-http.html#gnet-conn-http-delete">gnet_conn_http_delete</a>               (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn);
<GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            <a class="link" href="gnet-conn-http.html#gnet-http-get">gnet_http_get</a>                       (const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *url,
                                                         <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> **buffer,
                                                         <GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> *length,
                                                         <GTKDOCLINK HREF="guint">guint</GTKDOCLINK> *response);
</pre>
</div>
<div class="refsect1">
<a name="id-1.5.8.4"></a><h2>Description</h2>
<p>
A <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a> represents a HTTP client connection. A <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
is created directly by calling <a class="link" href="gnet-conn-http.html#gnet-conn-http-new"><code class="function">gnet_conn_http_new()</code></a>. After
that set the URI to retrieve using <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-uri"><code class="function">gnet_conn_http_set_uri()</code></a>. 
A connection is made and the HTTP request sent only once 
either <a class="link" href="gnet-conn-http.html#gnet-conn-http-run-async"><code class="function">gnet_conn_http_run_async()</code></a> or <a class="link" href="gnet-conn-http.html#gnet-conn-http-run"><code class="function">gnet_conn_http_run()</code></a>
is called. Use the asynchroneous variant if you want the
function to return immediately and prefer to receive data
and status information in the background via the callback
function. <a class="link" href="gnet-conn-http.html#gnet-conn-http-run-async"><code class="function">gnet_conn_http_run_async()</code></a> assumes that there is
already a GLib main loop running (e.g. the Gtk main loop).
</p>
<p>
You can decide for yourself how much information you would
like to receive during the HTTP operation. All status 
information is communicated to the caller via the optional
callback function.
</p>
<p>
The easiest way to just retrieve some data via HTTP is to
use the convenience function <a class="link" href="gnet-conn-http.html#gnet-http-get"><code class="function">gnet_http_get()</code></a>.
</p>
<p>
Here is a small example how to retrieve a file with the
least amount of effort and error checking (this is 
more or less what <a class="link" href="gnet-conn-http.html#gnet-http-get"><code class="function">gnet_http_get()</code></a> does internally):
</p>
<div class="example">
<a name="id-1.5.8.4.5.2"></a><p class="title"><b>Example 1. Simple <span class="structname">GConnHttp</span> usage.</b></p>
<div class="example-contents"><pre class="programlisting">
#define GNET_EXPERIMENTAL
#include &lt;gnet.h&gt;

void
fetch_and_print_url (const gchar *url)
{
  GConnHttp  *conn;
  
  conn = gnet_conn_http_new();
  
  gnet_conn_http_set_uri(conn, url);
  
  if (gnet_conn_http_run(conn, NULL, NULL))
  {
    gchar *buf;
    gsize  buflen;
    
    if (gnet_conn_http_steal_buffer(conn, &amp;buf, &amp;buflen))
    {
      g_print ("Received %%u bytes of data:\n%%s\n", buflen, buf);
      g_free(buf);
    }
  }
  
  gnet_conn_http_delete(conn);
}

  ...

  fetch_and_print_url ("http://www.google.com");
  
  ...

</pre></div>
</div>
<p><br class="example-break">
</p>
<p>
<a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a> is still considered less mature than other parts of GNet, even
though it should generall work just fine. It just has not received as much
testing as other parts of GNet yet. You should not use it in production
level code without thoroughly testing it for your purposes. Because of that,
you need to define GNET_EXPERIMENTAL in your source code before including the
GNet headers (otherwise you will get compiler errors when trying to use it).
</p>
</div>
<div class="refsect1">
<a name="id-1.5.8.5"></a><h2>Details</h2>
<div class="refsect2">
<a name="id-1.5.8.5.2"></a><h3>
<a name="GConnHttp"></a>GConnHttp</h3>
<pre class="programlisting">typedef struct _GConnHttp GConnHttp;</pre>
<p>
HTTP Connection. The entire GConnHttp struct is opaque and private.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.3"></a><h3>
<a name="GConnHttpMethod"></a>enum GConnHttpMethod</h3>
<pre class="programlisting">typedef enum
{
 GNET_CONN_HTTP_METHOD_GET,
 GNET_CONN_HTTP_METHOD_POST
} GConnHttpMethod;
</pre>
<p>
HTTP request method.  Use with <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-method"><code class="function">gnet_conn_http_set_method()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-METHOD-GET:CAPS"></a><code class="literal">GNET_CONN_HTTP_METHOD_GET</code></span></p></td>
<td> HTTP GET method
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-METHOD-POST:CAPS"></a><code class="literal">GNET_CONN_HTTP_METHOD_POST</code></span></p></td>
<td> HTTP POST method
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.4"></a><h3>
<a name="GConnHttpError"></a>enum GConnHttpError</h3>
<pre class="programlisting">typedef enum
{
 GNET_CONN_HTTP_ERROR_UNSPECIFIED,
 GNET_CONN_HTTP_ERROR_PROTOCOL_UNSUPPORTED,
 GNET_CONN_HTTP_ERROR_HOSTNAME_RESOLUTION
} GConnHttpError;
</pre>
<p>
Error codes.  Used by <a class="link" href="gnet-conn-http.html#GConnHttpEventError"><span class="type">GConnHttpEventError</span></a>.  Note that 
   errors by the HTTP server will be communicated to the
   client via the <a class="link" href="gnet-conn-http.html#GConnHttpEventResponse"><span class="type">GConnHttpEventResponse</span></a> event.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-ERROR-UNSPECIFIED:CAPS"></a><code class="literal">GNET_CONN_HTTP_ERROR_UNSPECIFIED</code></span></p></td>
<td> connection error
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-ERROR-PROTOCOL-UNSUPPORTED:CAPS"></a><code class="literal">GNET_CONN_HTTP_ERROR_PROTOCOL_UNSUPPORTED</code></span></p></td>
<td> unsupported protocol (ie. not http)
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-ERROR-HOSTNAME-RESOLUTION:CAPS"></a><code class="literal">GNET_CONN_HTTP_ERROR_HOSTNAME_RESOLUTION</code></span></p></td>
<td> the hostname could not be resolved
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.5"></a><h3>
<a name="GConnHttpEventType"></a>enum GConnHttpEventType</h3>
<pre class="programlisting">typedef enum
{
 GNET_CONN_HTTP_RESOLVED,           /* resolved host name           */
 GNET_CONN_HTTP_CONNECTED,          /* connected to host            */
 GNET_CONN_HTTP_RESPONSE,           /* got response (incl. headers) */
 GNET_CONN_HTTP_REDIRECT,           /* got redirect                 */
 GNET_CONN_HTTP_DATA_PARTIAL,       /* we got some data             */
 GNET_CONN_HTTP_DATA_COMPLETE,      /* we got all data              */
 GNET_CONN_HTTP_TIMEOUT,            /* the connection timed out     */
 GNET_CONN_HTTP_ERROR               /* GConnHttp problem            */
} GConnHttpEventType;
</pre>
<p>
GConnHttp event type.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-RESOLVED:CAPS"></a><code class="literal">GNET_CONN_HTTP_RESOLVED</code></span></p></td>
<td> the host name has been 
  resolved or host name resolution failed. The event
  structure will be a <a class="link" href="gnet-conn-http.html#GConnHttpEventResolved"><span class="type">GConnHttpEventResolved</span></a> structure
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-CONNECTED:CAPS"></a><code class="literal">GNET_CONN_HTTP_CONNECTED</code></span></p></td>
<td> the TCP connection to 
  the HTTP server has been established
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-RESPONSE:CAPS"></a><code class="literal">GNET_CONN_HTTP_RESPONSE</code></span></p></td>
<td> the HTTP server has sent 
  a response and response headers. The event
  structure will be a <a class="link" href="gnet-conn-http.html#GConnHttpEventResponse"><span class="type">GConnHttpEventResponse</span></a> structure
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-REDIRECT:CAPS"></a><code class="literal">GNET_CONN_HTTP_REDIRECT</code></span></p></td>
<td> the HTTP server has sent 
  a redirect response. The event structure will be a
  <a class="link" href="gnet-conn-http.html#GConnHttpEventRedirect"><span class="type">GConnHttpEventRedirect</span></a> structure
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-DATA-PARTIAL:CAPS"></a><code class="literal">GNET_CONN_HTTP_DATA_PARTIAL</code></span></p></td>
<td> data has been received.
  The buffer is caller-owned (ie. owned by GNet), but 
  may be emptied using <a class="link" href="gnet-conn-http.html#gnet-conn-http-steal-buffer"><code class="function">gnet_conn_http_steal_buffer()</code></a>. The
  event structure will be a <a class="link" href="gnet-conn-http.html#GConnHttpEventData"><span class="type">GConnHttpEventData</span></a> structure
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-DATA-COMPLETE:CAPS"></a><code class="literal">GNET_CONN_HTTP_DATA_COMPLETE</code></span></p></td>
<td> data has been received
  in full.  The buffer is caller-owned (ie. owned by GNet), 
  but may be emptied using <a class="link" href="gnet-conn-http.html#gnet-conn-http-steal-buffer"><code class="function">gnet_conn_http_steal_buffer()</code></a>. The
  event structure will be a <a class="link" href="gnet-conn-http.html#GConnHttpEventData"><span class="type">GConnHttpEventData</span></a> structure
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-TIMEOUT:CAPS"></a><code class="literal">GNET_CONN_HTTP_TIMEOUT</code></span></p></td>
<td> the connection timed out
</td>
</tr>
<tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-ERROR:CAPS"></a><code class="literal">GNET_CONN_HTTP_ERROR</code></span></p></td>
<td> <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a> problem (not a server 
  error response). The event structure will be a 
  <a class="link" href="gnet-conn-http.html#GConnHttpEventError"><span class="type">GConnHttpEventError</span></a> structure
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.6"></a><h3>
<a name="GConnHttpEvent"></a>GConnHttpEvent</h3>
<pre class="programlisting">typedef struct {
 GConnHttpEventType   type;           /* type of event (see above)         */
} GConnHttpEvent;
</pre>
<p>
GConnHttp Base Event.  Check event-&gt;type and then cast the event
  structure into the corresponding specialised event structure.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><a class="link" href="gnet-conn-http.html#GConnHttpEventType">GConnHttpEventType</a> <em class="structfield"><code>type</code></em>;</span></p></td>
<td> event type
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.7"></a><h3>
<a name="GConnHttpEventResolved"></a>GConnHttpEventResolved</h3>
<pre class="programlisting">typedef struct {
 GInetAddr           *ia;             /* GInetAddr of the host name        */
} GConnHttpEventResolved;
</pre>
<p>
GConnHttp Host Name Resolved Event.  Emitted when the host name has 
  been resolved to an IP address, primarily to give progress feedback 
  to the user. <em class="parameter"><code>ia</code></em> will be NULL if the host name could not be resolved.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><a class="link" href="gnet-inetaddr.html#GInetAddr">GInetAddr</a> *<em class="structfield"><code>ia</code></em>;</span></p></td>
<td> a <a class="link" href="gnet-inetaddr.html#GInetAddr"><span class="type">GInetAddr</span></a> of the resolved host name.
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.8"></a><h3>
<a name="GConnHttpEventResponse"></a>GConnHttpEventResponse</h3>
<pre class="programlisting">typedef struct {
 guint                response_code;  /* response code, e.g. 200, or 404   */
 gchar              **header_fields;  /* NULL-terminated array of strings  */
 gchar              **header_values;  /* NULL-terminated array of strings  */
} GConnHttpEventResponse;
</pre>
<p>
Emitted when the server has sent a response and response headers.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="guint">guint</GTKDOCLINK> <em class="structfield"><code>response_code</code></em>;</span></p></td>
<td> response code from the HTTP server (e.g. 200 or 404)
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> **<em class="structfield"><code>header_fields</code></em>;</span></p></td>
<td> array of header field strings, NULL-terminated
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> **<em class="structfield"><code>header_values</code></em>;</span></p></td>
<td> array of header value strings, NULL-terminated
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.9"></a><h3>
<a name="GConnHttpEventRedirect"></a>GConnHttpEventRedirect</h3>
<pre class="programlisting">typedef struct {
 guint                num_redirects;  /* number of redirects so far        */
 guint                max_redirects;  /* max. num. of redirects allowed    */
 gchar               *new_location;   /* redirect location if provided     */
 gboolean             auto_redirect;  /* FALSE if action is needed         */
} GConnHttpEventRedirect;
</pre>
<p>
Emitted when the server sends a redirect response.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="guint">guint</GTKDOCLINK> <em class="structfield"><code>num_redirects</code></em>;</span></p></td>
<td> number of redirects so far
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="guint">guint</GTKDOCLINK> <em class="structfield"><code>max_redirects</code></em>;</span></p></td>
<td> maximum number of redirects allowed
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *<em class="structfield"><code>new_location</code></em>;</span></p></td>
<td> redirect location, or NULL if not provided
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK> <em class="structfield"><code>auto_redirect</code></em>;</span></p></td>
<td> FALSE if action by the client is needed. Set 
                 to FALSE to prevent automatic redirection
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.10"></a><h3>
<a name="GConnHttpEventData"></a>GConnHttpEventData</h3>
<pre class="programlisting">typedef struct {
 guint64              content_length; /* set if available, otherwise 0     */
 guint64              data_received;  /* bytes received so far             */
 const gchar         *buffer;         /* buffer                            */
 gsize                buffer_length;  /* buffer length                     */
} GConnHttpEventData;
</pre>
<p>
Emitted when data has been received. Useful for progress feedback 
  to the user or to process data before all of it has been received.
  The client is responsible for emptying the buffer regularly when the 
  amount of data received or expected is larger than the amount that
  should be kept in memory (e.g. in the case of large binary files).</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="guint64">guint64</GTKDOCLINK> <em class="structfield"><code>content_length</code></em>;</span></p></td>
<td> set if available, otherwise 0
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="guint64">guint64</GTKDOCLINK> <em class="structfield"><code>data_received</code></em>;</span></p></td>
<td> total amount of data received so far
</td>
</tr>
<tr>
<td><p><span class="term">const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *<em class="structfield"><code>buffer</code></em>;</span></p></td>
<td> buffer with data received so far. Use 
 <a class="link" href="gnet-conn-http.html#gnet-conn-http-steal-buffer"><code class="function">gnet_conn_http_steal_buffer()</code></a> to empty the buffer.
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> <em class="structfield"><code>buffer_length</code></em>;</span></p></td>
<td> buffer length
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.11"></a><h3>
<a name="GConnHttpEventError"></a>GConnHttpEventError</h3>
<pre class="programlisting">typedef struct {
 GConnHttpError       code;           /* error code                        */
 gchar               *message;        /* message (use for debugging only)  */
} GConnHttpEventError;
</pre>
<p>
Emitted when an error has occured. Note that HTTP server errors are
  communicated to the client by means of a <a class="link" href="gnet-conn-http.html#GConnHttpEventResponse"><span class="type">GConnHttpEventResponse</span></a> event.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><a class="link" href="gnet-conn-http.html#GConnHttpError">GConnHttpError</a> <em class="structfield"><code>code</code></em>;</span></p></td>
<td> one of the <a class="link" href="gnet-conn-http.html#GConnHttpError"><span class="type">GConnHttpError</span></a> codes
</td>
</tr>
<tr>
<td><p><span class="term"><GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *<em class="structfield"><code>message</code></em>;</span></p></td>
<td> clear-text error message (for debugging purposes only)
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.12"></a><h3>
<a name="GConnHttpFunc"></a>GConnHttpFunc ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                (*GConnHttpFunc)                    (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpEvent">GConnHttpEvent</a> *event,
                                                         <GTKDOCLINK HREF="gpointer">gpointer</GTKDOCLINK> user_data);</pre>
<p>
Callback for <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>.
</p>
<p>
 Check event-&gt;type and then cast the event into the appropriate
  event structure. event-&gt;type will be one of
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-RESOLVED:CAPS"><code class="literal">GNET_CONN_HTTP_RESOLVED</code></a>: this event occurs when the host name
 has been resolved or host name resolution failed
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-CONNECTED:CAPS"><code class="literal">GNET_CONN_HTTP_CONNECTED</code></a>: the TCP connection to the 
 HTTP server has been established
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-RESPONSE:CAPS"><code class="literal">GNET_CONN_HTTP_RESPONSE</code></a>: the HTTP server has sent a response
 and response headers
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-REDIRECT:CAPS"><code class="literal">GNET_CONN_HTTP_REDIRECT</code></a>: the HTTP server has sent a redirect
 response
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-DATA-PARTIAL:CAPS"><code class="literal">GNET_CONN_HTTP_DATA_PARTIAL</code></a>: data has been read. The buffer is
 owned by GNet and you must not modify it or free it. You can
 take ownership of the buffer with <a class="link" href="gnet-conn-http.html#gnet-conn-http-steal-buffer"><code class="function">gnet_conn_http_steal_buffer()</code></a>
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-DATA-COMPLETE:CAPS"><code class="literal">GNET_CONN_HTTP_DATA_COMPLETE</code></a>: data has been received in full.
 The buffer is owned by GNet and you must not modify it or free 
 it. You can acquire ownership of the buffer by calling 
 <a class="link" href="gnet-conn-http.html#gnet-conn-http-steal-buffer"><code class="function">gnet_conn_http_steal_buffer()</code></a>
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-TIMEOUT:CAPS"><code class="literal">GNET_CONN_HTTP_TIMEOUT</code></a>: the connection timed out
</p>
<p>
 <a class="link" href="gnet-conn-http.html#GNET-CONN-HTTP-ERROR:CAPS"><code class="literal">GNET_CONN_HTTP_ERROR</code></a>: <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a> problem (not a server error response)</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>event</code></em> :</span></p></td>
<td> event (caller-owned, do not free)
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user data specified in <a class="link" href="gnet-conn-http.html#gnet-conn-http-run"><code class="function">gnet_conn_http_run()</code></a> 
             or <a class="link" href="gnet-conn-http.html#gnet-conn-http-run-async"><code class="function">gnet_conn_http_run_async()</code></a>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.13"></a><h3>
<a name="GConnHttpHeaderFlags"></a>enum GConnHttpHeaderFlags</h3>
<pre class="programlisting">typedef enum
{
  GNET_CONN_HTTP_FLAG_SKIP_HEADER_CHECK  = 1
} GConnHttpHeaderFlags;
</pre>
<p>
Flags for <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-header"><code class="function">gnet_conn_http_set_header()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><a name="GNET-CONN-HTTP-FLAG-SKIP-HEADER-CHECK:CAPS"></a><code class="literal">GNET_CONN_HTTP_FLAG_SKIP_HEADER_CHECK</code></span></p></td>
<td> do not check whether
  the header is a standard header
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.14"></a><h3>
<a name="gnet-conn-http-new"></a>gnet_conn_http_new ()</h3>
<pre class="programlisting"><a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a>*          gnet_conn_http_new                  (void);</pre>
<p>
Creates a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>.

</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.15"></a><h3>
<a name="gnet-conn-http-set-uri"></a>gnet_conn_http_set_uri ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_set_uri              (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *uri);</pre>
<p>
Sets the URI to GET or POST, e.g. http://www.foo.com/bar.html. <em class="parameter"><code>uri</code></em> is
 assumed to be unescaped, so all special URI characters will be escaped.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>uri</code></em> :</span></p></td>
<td> URI string
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if the URI has been accepted.

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.16"></a><h3>
<a name="gnet-conn-http-set-escaped-uri"></a>gnet_conn_http_set_escaped_uri ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_set_escaped_uri      (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *uri);</pre>
<p>
Sets the URI to GET or POST, e.g. http://www.foo.com/My%<GTKDOCLINK HREF="20Documents"><code class="literal">20Documents</code></GTKDOCLINK>/bar.txt</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>uri</code></em> :</span></p></td>
<td> URI string with special characters already escaped
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if the URI has been accepted.

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.17"></a><h3>
<a name="gnet-conn-http-set-header"></a>gnet_conn_http_set_header ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_set_header           (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *field,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *value,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpHeaderFlags">GConnHttpHeaderFlags</a> flags);</pre>
<p>
Set header field to send with the HTTP request.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>field</code></em> :</span></p></td>
<td> a header field, e.g. "Accept"
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>value</code></em> :</span></p></td>
<td> the header field value, e.g. "text/html"
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>flags</code></em> :</span></p></td>
<td> one or more flags of <a class="link" href="gnet-conn-http.html#GConnHttpHeaderFlags"><span class="type">GConnHttpHeaderFlags</span></a>, or 0
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if the header field has been set or changed

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.18"></a><h3>
<a name="gnet-conn-http-set-max-redirects"></a>gnet_conn_http_set_max_redirects ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                gnet_conn_http_set_max_redirects    (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="guint">guint</GTKDOCLINK> num);</pre>
<p>
Sets the maximum allowed number of automatic redirects.
  Note that the HTTP protocol specification (RFC2616) specifies 
  occasions where the client must not redirect automatically 
  without user intervention. In those cases, no automatic redirect
  will be performed, even if the limit has not been reached yet.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>num</code></em> :</span></p></td>
<td> the maximum number of allowed automatic redirects
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.19"></a><h3>
<a name="gnet-conn-http-set-timeout"></a>gnet_conn_http_set_timeout ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                gnet_conn_http_set_timeout          (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="guint">guint</GTKDOCLINK> timeout);</pre>
<p>
Sets a timeout on the http connection.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timeout</code></em> :</span></p></td>
<td> timeout in milliseconds
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.20"></a><h3>
<a name="gnet-conn-http-set-user-agent"></a>gnet_conn_http_set_user_agent ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_set_user_agent       (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *agent);</pre>
<p>
Convenience function. Wraps <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-header"><code class="function">gnet_conn_http_set_header()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>agent</code></em> :</span></p></td>
<td> the user agent string to send (will be supplemented by a GNet
         version number comment)
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if the user agent string has been changed.

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.21"></a><h3>
<a name="gnet-conn-http-set-method"></a>gnet_conn_http_set_method ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_set_method           (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpMethod">GConnHttpMethod</a> method,
                                                         const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *post_data,
                                                         <GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> post_data_len);</pre>
<p>
Sets the HTTP request method. Default is the GET method.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>method</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttpMethod"><span class="type">GConnHttpMethod</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>post_data</code></em> :</span></p></td>
<td> post data to send with POST method, or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>post_data_len</code></em> :</span></p></td>
<td> the length of the post data to send with POST method, or 0
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if the method has been changed successfully.

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.22"></a><h3>
<a name="gnet-conn-http-set-main-context"></a>gnet_conn_http_set_main_context ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_set_main_context     (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="GMainContext">GMainContext</GTKDOCLINK> *context);</pre>
<p>
Sets the GLib <GTKDOCLINK HREF="GMainContext"><span class="type">GMainContext</span></GTKDOCLINK> to use for asynchronous operations. You should
 call this function right after you create <em class="parameter"><code>conn</code></em>. You must not call this
 function after the actual connection process has started.
</p>
<p>
 You are very unlikely to ever need this function.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <GTKDOCLINK HREF="GMainContext"><span class="type">GMainContext</span></GTKDOCLINK>, or NULL to use the default GLib main context
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE on success, FALSE on failure.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  2.0.8
</p>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.23"></a><h3>
<a name="gnet-conn-http-run-async"></a>gnet_conn_http_run_async ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                gnet_conn_http_run_async            (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpFunc">GConnHttpFunc</a> func,
                                                         <GTKDOCLINK HREF="gpointer">gpointer</GTKDOCLINK> user_data);</pre>
<p>
Starts connecting and sending the specified http request. Will 
  return immediately. Assumes there is an existing and running 
  default Gtk/GLib/Gnome main loop.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>func</code></em> :</span></p></td>
<td> callback function to communicate progress and errors, or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user data to pass to callback function, or NULL
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.24"></a><h3>
<a name="gnet-conn-http-run"></a>gnet_conn_http_run ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_run                  (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <a class="link" href="gnet-conn-http.html#GConnHttpFunc">GConnHttpFunc</a> func,
                                                         <GTKDOCLINK HREF="gpointer">gpointer</GTKDOCLINK> user_data);</pre>
<p>
Starts connecting and sending the specified http request. Will 
  return once the operation has finished and either an error has 
  occured, or the data has been received in full.
</p>
<p>
  This function will run its own main loop in the default GLib main context
  (or the user-specified main context, if one was specified with
  <a class="link" href="gnet-conn-http.html#gnet-conn-http-set-main-context"><code class="function">gnet_conn_http_set_main_context()</code></a>), which means that if your application
  is based on Gtk+ or sets up GLib timeouts or idle callbacks, it is
  possible that those callback functions are invoked while you are waiting
  for <a class="link" href="gnet-conn-http.html#gnet-conn-http-run"><code class="function">gnet_conn_http_run()</code></a> to return. This means you shouldn't make
  assumptions about any state you set up before calling this function,
  because it might have been changed again from within a callback in the
  mean time (if this can happen or not depends on your callbacks and what
  they do of course).</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>func</code></em> :</span></p></td>
<td> callback function to communicate progress and errors, or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td> user data to pass to callback function, or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if no error occured before connecting

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.25"></a><h3>
<a name="gnet-conn-http-steal-buffer"></a>gnet_conn_http_steal_buffer ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_conn_http_steal_buffer         (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn,
                                                         <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> **buffer,
                                                         <GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> *length);</pre>
<p>
Empties the current buffer and returns the contents. The 
  main purpose of this function is to make it possible to 
  just use <a class="link" href="gnet-conn-http.html#gnet-conn-http-run"><code class="function">gnet_conn_http_run()</code></a>, check its return value, and 
  then get the buffer data without having to install a 
  callback function. Also needed to empty the buffer regularly
  while receiving large amounts of data.
</p>
<p>
 The caller (you) needs to free the buffer with <GTKDOCLINK HREF="g-free"><code class="function">g_free()</code></GTKDOCLINK> when done.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>buffer</code></em> :</span></p></td>
<td> where to store a pointer to the buffer data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>length</code></em> :</span></p></td>
<td> where to store the length of the buffer data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if buffer and length have been set

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.26"></a><h3>
<a name="gnet-conn-http-cancel"></a>gnet_conn_http_cancel ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                gnet_conn_http_cancel               (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn);</pre>
<p>
Cancels the current http transfer (if any) and makes
  <a class="link" href="gnet-conn-http.html#gnet-conn-http-run"><code class="function">gnet_conn_http_run()</code></a> return immediately. Will do nothing
  if the transfer was started with <a class="link" href="gnet-conn-http.html#gnet-conn-http-run-async"><code class="function">gnet_conn_http_run_async()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.27"></a><h3>
<a name="gnet-conn-http-delete"></a>gnet_conn_http_delete ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="void">void</GTKDOCLINK>                gnet_conn_http_delete               (<a class="link" href="gnet-conn-http.html#GConnHttp">GConnHttp</a> *conn);</pre>
<p>
Deletes a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a> and frees all associated resources.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>conn</code></em> :</span></p></td>
<td> a <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.5.8.5.28"></a><h3>
<a name="gnet-http-get"></a>gnet_http_get ()</h3>
<pre class="programlisting"><GTKDOCLINK HREF="gboolean">gboolean</GTKDOCLINK>            gnet_http_get                       (const <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> *url,
                                                         <GTKDOCLINK HREF="gchar">gchar</GTKDOCLINK> **buffer,
                                                         <GTKDOCLINK HREF="gsize">gsize</GTKDOCLINK> *length,
                                                         <GTKDOCLINK HREF="guint">guint</GTKDOCLINK> *response);</pre>
<p>
Convenience function that just retrieves
  the provided URI without the need to 
  set up a full <a class="link" href="gnet-conn-http.html#GConnHttp"><span class="type">GConnHttp</span></a>. Uses 
  <a class="link" href="gnet-conn-http.html#gnet-conn-http-run"><code class="function">gnet_conn_http_run()</code></a> internally.
</p>
<p>
 Caller (you) needs to free the buffer with <GTKDOCLINK HREF="g-free"><code class="function">g_free()</code></GTKDOCLINK> when
  no longer needed.
</p>
<p>
 This function will run its own main loop in the default GLib main context,
  which means that if your application is based on Gtk+ or sets up GLib
  timeouts or idle callbacks, it is possible that those callback functions
  are invoked while you are waiting for <a class="link" href="gnet-conn-http.html#gnet-http-get"><code class="function">gnet_http_get()</code></a> to return. This
  means you shouldn't make assumptions about any state you set up before
  calling this function, because it might have been changed again from
  within a callback in the mean time (if this can happen or not depends on
  your callbacks and what they do of course).</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>url</code></em> :</span></p></td>
<td> a URI, e.g. http://www.foo.com
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>buffer</code></em> :</span></p></td>
<td> where to store a pointer to the data retrieved
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>length</code></em> :</span></p></td>
<td> where to store the length of the data retrieved
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>response</code></em> :</span></p></td>
<td> where to store the last HTTP response code 
 received from the HTTP server, or NULL.
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if <em class="parameter"><code>buffer</code></em>, <em class="parameter"><code>length</code></em> and <em class="parameter"><code>response</code></em> are set,
  otherwise FALSE.

</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div id="footer_art" class="default"> </div></div><div class="clearfix"></div><div id="footer_grass">   </div><div id="footer"><div class="container_12"><div class="links grid_9"><div class="menu-footer-1-container"><ul id="menu-footer-1" class="menu"><li id="menu-item-88" class="menu-item menu-item-type-custom menu-item-home menu-item-88"><a href="https://www.gnome.org/">The GNOME Project</a><ul class="sub-menu"><li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-89"><a href="https://www.gnome.org/about/">About Us</a></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-90"><a href="https://www.gnome.org/get-involved/">Get Involved</a></li><li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-91"><a href="https://www.gnome.org/teams/">Teams</a></li><li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-92"><a href="https://foundation.gnome.org">The GNOME Foundation</a></li><li><a href="https://www.gnome.org/support-gnome/">Support GNOME</a></li><li><a href="https://www.gnome.org/contact/">Contact</a></li></ul></li></ul></div><div class="menu-footer-2-container"><ul id="menu-footer-2" class="menu"><li id="menu-item-99" class="menu-item menu-item-type-post_type current-menu-item page_item page-item-20 current_page_item menu-item-99"><a href="gnet-conn-http.html#">Resources</a><ul class="sub-menu"><li><a href="https://help.gnome.org">Documentation</a></li><li><a href="https://wiki.gnome.org">Wiki</a></li><li><a href="https://mail.gnome.org/mailman/listinfo">Mailing Lists</a></li><li><a href="https://wiki.gnome.org/GnomeIrcChannels">IRC Channels</a></li><li><a href="https://gitlab.gnome.org/">Bug Tracker</a></li><li><a href="https://gitlab.gnome.org/">Development Code</a></li><li><a href="https://wiki.gnome.org/Jhbuild">Build Tool</a></li></ul></li></ul></div><div class="menu-footer-4-container"><ul id="menu-footer-4" class="menu"><li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-104"><a href="http://www.gnome.org/news/">News</a><ul class="sub-menu"><li><a href="https://www.gnome.org/start/stable">Latest Release</a></li><li><a href="https://planet.gnome.org">Planet GNOME</a></li><li><a href="https://news.gnome.org">Development News</a></li><li><a href="https://twitter.com/gnome">Twitter</a></li></ul></li></ul></div></div><div class="links grid_3 right"><div><ul class="menu available_languages"><li><strong>This website is available in many languages</strong><ul class="sub-menu"><li><a href="../../languages.html" title="Switching Language">Switch Language</a></li></ul></li></ul><script type="text/javascript" src="../../js/language.js"></script></div></div><div id="footnotes" class="grid_9">
                Copyright © 2005‒2014 <strong class="gnome_logo">The GNOME Project</strong><br></br><small>Optimised for standards. Hosted by <a href="http://redhat.com">Red Hat</a>.</small></div><div class="clear"></div></div></div><script type="text/javascript">
$(document).ready(function() {
    // Get browser
    $.each($.browser, function(i) {
        $('body').addClass(i);
        return false;
    });

    // Get OS and add it as class to body tag, this then allows forcing some
    // customisation in the CSS rules.
    var match = navigator.userAgent.toLowerCase().match(/(win|mac|linux)/);
    if (match) {
        $('body').addClass(match[0]);
    }
});
</script><script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://webstats.gnome.org/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "6"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script></body></html>
